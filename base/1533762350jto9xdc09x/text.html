<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<html>
<main>
        <h1>Модуль time – таймеры времени</h1>
        <p>Модуль <span class="strong">Python time</span> обеспечивает доступ к нескольким различным типам, каждые из которых применяются для разных целей. Функция <span class="strong">monotonic()</span>
 может использоваться для измерения прошедшего времени в длительном 
процессе. Она никогда не уменьшает значение времени, даже если 
изменяется системное время.</p>
<p>Для тестирования производительности <span class="strong">perf_counter()</span> обеспечивает доступ к таймерам с самым высоким дроблением единиц времени для более точного измерения. Время <span class="strong">CPU</span> доступно через <span class="strong">clock()</span>, а <span class="strong">process_time()</span> возвращает комбинированное значение времени процессора и системы.</p>
<h2>Примечание</h2>
<p>В реализациях представлены функции библиотеки <span class="strong">C</span> для управления датами и временем. Поскольку они связаны с базовой реализацией языка <span class="strong">C</span>, некоторые элементы (<span class="italic">такие как начало эпохи и максимальное значение даты</span>) зависят от платформы. Подробную информацию смотрите в документации к библиотеке.</p>
<h3>Сравнение часов</h3>
<p>Детали реализации таймера в <span class="strong">Python</span> модуле <span class="strong">time</span> зависят от платформы. Используйте <span class="strong">get_clock_info()</span> для получения основной информации о текущей реализации, включая доступную точность часов:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">time_get_clock_info</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="kwd">import</span><span class="pln"> textwrap</span></li><li class="L2"><span class="kwd">import</span><span class="pln"> time</span></li><li class="L3"><span class="pln">available_clocks </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span></li><li class="L4"><span class="pln">    </span><span class="pun">(</span><span class="str">'clock'</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">clock</span><span class="pun">),</span></li><li class="L5"><span class="pln">    </span><span class="pun">(</span><span class="str">'monotonic'</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">monotonic</span><span class="pun">),</span></li><li class="L6"><span class="pln">    </span><span class="pun">(</span><span class="str">'perf_counter'</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">perf_counter</span><span class="pun">),</span></li><li class="L7"><span class="pln">    </span><span class="pun">(</span><span class="str">'process_time'</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">process_time</span><span class="pun">),</span></li><li class="L8"><span class="pln">    </span><span class="pun">(</span><span class="str">'time'</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">time</span><span class="pun">),</span></li><li class="L9"><span class="pun">]</span></li><li class="L0"><span class="kwd">for</span><span class="pln"> clock_name</span><span class="pun">,</span><span class="pln"> func </span><span class="kwd">in</span><span class="pln"> available_clocks</span><span class="pun">:</span></li><li class="L1"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">textwrap</span><span class="pun">.</span><span class="pln">dedent</span><span class="pun">(</span><span class="str">'''</span></li><li class="L2"><span class="str">    {name}:</span></li><li class="L3"><span class="str">        adjustable    : {info.adjustable}</span></li><li class="L4"><span class="str">        implementation: {info.implementation}</span></li><li class="L5"><span class="str">        monotonic     : {info.monotonic}</span></li><li class="L6"><span class="str">        resolution    : {info.resolution}</span></li><li class="L7"><span class="str">        current       : {current}</span></li><li class="L8"><span class="str">    '''</span><span class="pun">).</span><span class="pln">format</span><span class="pun">(</span></li><li class="L9"><span class="pln">        name</span><span class="pun">=</span><span class="pln">clock_name</span><span class="pun">,</span></li><li class="L0"><span class="pln">        info</span><span class="pun">=</span><span class="pln">time</span><span class="pun">.</span><span class="pln">get_clock_info</span><span class="pun">(</span><span class="pln">clock_name</span><span class="pun">),</span></li><li class="L1"><span class="pln">        current</span><span class="pun">=</span><span class="pln">func</span><span class="pun">())</span></li><li class="L2"><span class="pln">    </span><span class="pun">)</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Этот вывод для <span class="strong">Mac OS X</span> показывает, что <span class="strong">Python time</span> таймеры <span class="strong">monotonic</span> и <span class="strong">perf_counter</span> реализованы с использованием одного и того же базового системного вызова:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">$ python3 time_get_clock_info</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="pln">clock</span><span class="pun">:</span></li><li class="L2"><span class="pln">    adjustable    </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">False</span></li><li class="L3"><span class="pln">    implementation</span><span class="pun">:</span><span class="pln"> clock</span><span class="pun">()</span></li><li class="L4"><span class="pln">    monotonic     </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">True</span></li><li class="L5"><span class="pln">    resolution    </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1e-06</span></li><li class="L6"><span class="pln">    current       </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.028399</span></li><li class="L7"><span class="pln">monotonic</span><span class="pun">:</span></li><li class="L8"><span class="pln">    adjustable    </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">False</span></li><li class="L9"><span class="pln">    implementation</span><span class="pun">:</span><span class="pln"> mach_absolute_time</span><span class="pun">()</span></li><li class="L0"><span class="pln">    monotonic     </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">True</span></li><li class="L1"><span class="pln">    resolution    </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1e-09</span></li><li class="L2"><span class="pln">    current       </span><span class="pun">:</span><span class="pln"> </span><span class="lit">172336.002232467</span></li><li class="L3"><span class="pln">perf_counter</span><span class="pun">:</span></li><li class="L4"><span class="pln">    adjustable    </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">False</span></li><li class="L5"><span class="pln">    implementation</span><span class="pun">:</span><span class="pln"> mach_absolute_time</span><span class="pun">()</span></li><li class="L6"><span class="pln">    monotonic     </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">True</span></li><li class="L7"><span class="pln">    resolution    </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1e-09</span></li><li class="L8"><span class="pln">    current       </span><span class="pun">:</span><span class="pln"> </span><span class="lit">172336.002280763</span></li><li class="L9"><span class="pln">process_time</span><span class="pun">:</span></li><li class="L0"><span class="pln">    adjustable    </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">False</span></li><li class="L1"><span class="pln">    implementation</span><span class="pun">:</span><span class="pln"> getrusage</span><span class="pun">(</span><span class="pln">RUSAGE_SELF</span><span class="pun">)</span></li><li class="L2"><span class="pln">    monotonic     </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">True</span></li><li class="L3"><span class="pln">    resolution    </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1e-06</span></li><li class="L4"><span class="pln">    current       </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.028593</span></li><li class="L5"><span class="pln">time</span><span class="pun">:</span></li><li class="L6"><span class="pln">    adjustable    </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">True</span></li><li class="L7"><span class="pln">    implementation</span><span class="pun">:</span><span class="pln"> gettimeofday</span><span class="pun">()</span></li><li class="L8"><span class="pln">    monotonic     </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">False</span></li><li class="L9"><span class="pln">    resolution    </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1e-06</span></li><li class="L0"><span class="pln">    current       </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1471198232.045526</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<h3>Основной таймер</h3>
<div class="a69fc18d" data-region="main-content" data-finished="true"><div class="group group-A"><div class="block block-174 type-custom "><div class="field field-528">
<ins class="adsbygoogle" style="display: block; text-align: center; height: 0px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7264282846152864" data-ad-slot="1901069998" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display: inline-table; border: medium none; height: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 740px; background-color: transparent;"><ins id="aswift_0_anchor" style="display: block; border: medium none; height: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 740px; background-color: transparent; overflow: hidden; opacity: 0;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;width:740px;height:185px;" width="740" height="185" frameborder="0"></iframe></ins></ins></ins>
</div>
</div></div></div><p>Одной из функций ядра <span class="strong">Python модуля time</span> является функция <span class="strong">time()</span>, которая возвращает количество секунд с момента начала «эпохи» в виде значения с плавающей запятой:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">time_time</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="kwd">import</span><span class="pln"> time</span></li><li class="L2"><span class="kwd">print</span><span class="pun">(</span><span class="str">'The time is:'</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">time</span><span class="pun">())</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Эпоха — это начало измерения времени, которым для систем <span class="strong">Unix</span>
 является 0:00 1 января 1970 года. Хотя значение всегда является числом с
 плавающей запятой, фактическая точность зависит от платформы:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">$ python3 time_time</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="typ">The</span><span class="pln"> time </span><span class="kwd">is</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1471198232.091589</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Десятичная дробь полезна при хранении или сравнении дат, но не для 
создания читаемых человеком представлений. Для регистрации или вывода 
времени более полезной может оказаться функция <span class="strong">ctime()</span>:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">$ python3 time_ctime</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="typ">The</span><span class="pln"> time </span><span class="kwd">is</span><span class="pln">      </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">32</span><span class="pln"> </span><span class="lit">2016</span></li><li class="L2"><span class="lit">15</span><span class="pln"> secs </span><span class="kwd">from</span><span class="pln"> now </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">47</span><span class="pln"> </span><span class="lit">2016</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Второй вызов <span class="strong">print()</span> в этом примере иллюстрирует, как использовать <span class="strong">ctime()</span> для форматирования значения времени, которое отличается от текущего:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">$ python3 time_ctime</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="typ">The</span><span class="pln"> time </span><span class="kwd">is</span><span class="pln">      </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">32</span><span class="pln"> </span><span class="lit">2016</span></li><li class="L2"><span class="lit">15</span><span class="pln"> secs </span><span class="kwd">from</span><span class="pln"> now </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">47</span><span class="pln"> </span><span class="lit">2016</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<h3>Таймер относительного времени</h3>
<p><span class="strong">Python time()</span> использует системные часы, 
которые часы могут быть изменены пользовательскими или системными 
службами для синхронизации часов на нескольких компьютерах. Поэтому 
повторяющиеся вызовы <span class="strong">time()</span> могут давать 
значения, которые отличаются в большую или в меньшую сторону. Это может 
привести к неожиданному поведению при попытке измерения промежутка 
времени.</p>
<p>Избегайте таких ситуаций путем использования функции <span class="strong">monotonic()</span>, у которой возвращаемое при повторном вызове значение всегда больше предыдущего:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">time_monotonic</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="kwd">import</span><span class="pln"> time</span></li><li class="L2"><span class="pln">start </span><span class="pun">=</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">monotonic</span><span class="pun">()</span></li><li class="L3"><span class="pln">time</span><span class="pun">.</span><span class="pln">sleep</span><span class="pun">(</span><span class="lit">0.1</span><span class="pun">)</span></li><li class="L4"><span class="kwd">end</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">monotonic</span><span class="pun">()</span></li><li class="L5"><span class="kwd">print</span><span class="pun">(</span><span class="str">'start : {:&gt;9.2f}'</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="pln">start</span><span class="pun">))</span></li><li class="L6"><span class="kwd">print</span><span class="pun">(</span><span class="str">'end   : {:&gt;9.2f}'</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="kwd">end</span><span class="pun">))</span></li><li class="L7"><span class="kwd">print</span><span class="pun">(</span><span class="str">'span  : {:&gt;9.2f}'</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="kwd">end</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> start</span><span class="pun">))</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Начальная точка для относительных таймеров не определена, поэтому 
возвращаемые значения могут использоваться только для расчетов с другими
 значениями времени. В этом примере продолжительность спящего режима 
измеряется с помощью <span class="strong">monotonic()</span>:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">$ python3 time_monotonic</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="pln">start </span><span class="pun">:</span><span class="pln"> </span><span class="lit">172336.14</span></li><li class="L2"><span class="kwd">end</span><span class="pln">   </span><span class="pun">:</span><span class="pln"> </span><span class="lit">172336.24</span></li><li class="L3"><span class="pln">span  </span><span class="pun">:</span><span class="pln">      </span><span class="lit">0.10</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<h3>Таймер процессора</h3>
<p>В то время как <span class="strong">time()</span> возвращает время основных часов, <span class="strong">clock()</span> возвращает время процессора. Для этого можно использовать <span class="strong">Python get time</span>.</p>
<p>Значения, возвращаемые функцией <span class="strong">clock()</span>, отражают фактическое время, используемое программой при ее запуске:</p>
<div class="a69fc18d" data-region="main-content" data-finished="true"><div class="group group-B"><div class="block block-175 type-custom "><div class="field field-529">
<ins class="adsbygoogle" style="display: block; text-align: center; height: 0px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7264282846152864" data-ad-slot="3760946574" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display: inline-table; border: medium none; height: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 740px; background-color: transparent;"><ins id="aswift_1_anchor" style="display: block; border: medium none; height: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 740px; background-color: transparent; overflow: hidden; opacity: 0;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;width:740px;height:185px;" width="740" height="185" frameborder="0"></iframe></ins></ins></ins>
</div>
</div></div></div><div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">time_clock</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="kwd">import</span><span class="pln"> hashlib</span></li><li class="L2"><span class="kwd">import</span><span class="pln"> time</span></li><li class="L3"><span class="com"># Данные, используемые для вычисления контрольной суммы md5</span></li><li class="L4"><span class="pln">data </span><span class="pun">=</span><span class="pln"> open</span><span class="pun">(</span><span class="pln">__file__</span><span class="pun">,</span><span class="pln"> </span><span class="str">'rb'</span><span class="pun">).</span><span class="pln">read</span><span class="pun">()</span></li><li class="L5"><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">5</span><span class="pun">):</span></li><li class="L6"><span class="pln">    h </span><span class="pun">=</span><span class="pln"> hashlib</span><span class="pun">.</span><span class="pln">sha1</span><span class="pun">()</span></li><li class="L7"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">time</span><span class="pun">.</span><span class="pln">ctime</span><span class="pun">(),</span><span class="pln"> </span><span class="str">': {:0.3f} {:0.3f}'</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span></li><li class="L8"><span class="pln">        time</span><span class="pun">.</span><span class="pln">time</span><span class="pun">(),</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">clock</span><span class="pun">()))</span></li><li class="L9"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">300000</span><span class="pun">):</span></li><li class="L0"><span class="pln">        h</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="pln">data</span><span class="pun">)</span></li><li class="L1"><span class="pln">    cksum </span><span class="pun">=</span><span class="pln"> h</span><span class="pun">.</span><span class="pln">digest</span><span class="pun">()</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>В этом примере отформатированная <span class="strong">ctime()</span> выводится вместе со значениями с плавающей запятой из <span class="strong">time()</span> и <span class="strong">clock()</span> через цикл для каждой итерации.</p>
<h3>Примечание</h3>
<p>Если хотите запустить этот код в своей системе, то может 
потребоваться добавить во внутренний цикл другие циклы или придется 
работать с большим количеством данных, чтобы увидеть разницу во времени с
 помощью <span class="strong">Python time</span>:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">$ python3 time_clock</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">32</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1471198232.327</span><span class="pln"> </span><span class="lit">0.033</span></li><li class="L2"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">32</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1471198232.705</span><span class="pln"> </span><span class="lit">0.409</span></li><li class="L3"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">33</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1471198233.086</span><span class="pln"> </span><span class="lit">0.787</span></li><li class="L4"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">33</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1471198233.466</span><span class="pln"> </span><span class="lit">1.166</span></li><li class="L5"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">33</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1471198233.842</span><span class="pln"> </span><span class="lit">1.540</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Как правило, часы процессора ничего не засекают, если программа ничего не делает:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">time_clock_sleep</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="kwd">import</span><span class="pln"> time</span></li><li class="L2"><span class="kwd">template</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'{} - {:0.2f} - {:0.2f}'</span></li><li class="L3"><span class="kwd">print</span><span class="pun">(</span><span class="kwd">template</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span></li><li class="L4"><span class="pln">    time</span><span class="pun">.</span><span class="pln">ctime</span><span class="pun">(),</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">time</span><span class="pun">(),</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">clock</span><span class="pun">())</span></li><li class="L5"><span class="pun">)</span></li><li class="L6"><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">):</span></li><li class="L7"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'Sleeping'</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">)</span></li><li class="L8"><span class="pln">    time</span><span class="pun">.</span><span class="pln">sleep</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span></li><li class="L9"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="kwd">template</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span></li><li class="L0"><span class="pln">        time</span><span class="pun">.</span><span class="pln">ctime</span><span class="pun">(),</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">time</span><span class="pun">(),</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">clock</span><span class="pun">())</span></li><li class="L1"><span class="pln">    </span><span class="pun">)</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>В этом примере <span class="strong">Python 3 time sleep</span> цикл выполняет мало действий, переходя в спящий режим после каждой итерации. Значение <span class="strong">time()</span> увеличивается даже тогда, когда приложение находится в спящем режиме, но значение <span class="strong">clock()</span> отсутствует:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">$ python3 </span><span class="pun">-</span><span class="pln">u time_clock_sleep</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">34</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1471198234.28</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">0.03</span></li><li class="L2"><span class="typ">Sleeping</span><span class="pln"> </span><span class="lit">3</span></li><li class="L3"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">37</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1471198237.28</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">0.03</span></li><li class="L4"><span class="typ">Sleeping</span><span class="pln"> </span><span class="lit">2</span></li><li class="L5"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">39</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1471198239.29</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">0.03</span></li><li class="L6"><span class="typ">Sleeping</span><span class="pln"> </span><span class="lit">1</span></li><li class="L7"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">40</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1471198240.29</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">0.03</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Вызов <span class="strong">sleep()</span> передает управление из 
текущего потока и указывает ожидать, пока система активирует его. Если 
программа имеет только один поток, это эффективно блокирует приложение, и
 оно не работает.</p>
<h3>Счетчик производительности</h3>
<p>Для измерения производительности важно иметь таймеры <span class="strong">monotonic</span> с высокой точностью. Определение наилучшего источника данных синхронизации требует наличия информации о платформе, которую <span class="strong">Python</span> предоставляет в <span class="strong">perf_counter()</span>:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">time_perf_counter</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="kwd">import</span><span class="pln"> hashlib</span></li><li class="L2"><span class="kwd">import</span><span class="pln"> time</span></li><li class="L3"><span class="com"># Data to use to calculate md5 checksums</span></li><li class="L4"><span class="pln">data </span><span class="pun">=</span><span class="pln"> open</span><span class="pun">(</span><span class="pln">__file__</span><span class="pun">,</span><span class="pln"> </span><span class="str">'rb'</span><span class="pun">).</span><span class="pln">read</span><span class="pun">()</span></li><li class="L5"><span class="pln">loop_start </span><span class="pun">=</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">perf_counter</span><span class="pun">()</span></li><li class="L6"><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">5</span><span class="pun">):</span></li><li class="L7"><span class="pln">    iter_start </span><span class="pun">=</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">perf_counter</span><span class="pun">()</span></li><li class="L8"><span class="pln">    h </span><span class="pun">=</span><span class="pln"> hashlib</span><span class="pun">.</span><span class="pln">sha1</span><span class="pun">()</span></li><li class="L9"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">300000</span><span class="pun">):</span></li><li class="L0"><span class="pln">        h</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="pln">data</span><span class="pun">)</span></li><li class="L1"><span class="pln">    cksum </span><span class="pun">=</span><span class="pln"> h</span><span class="pun">.</span><span class="pln">digest</span><span class="pun">()</span></li><li class="L2"><span class="pln">    now </span><span class="pun">=</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">perf_counter</span><span class="pun">()</span></li><li class="L3"><span class="pln">    loop_elapsed </span><span class="pun">=</span><span class="pln"> now </span><span class="pun">-</span><span class="pln"> loop_start</span></li><li class="L4"><span class="pln">    iter_elapsed </span><span class="pun">=</span><span class="pln"> now </span><span class="pun">-</span><span class="pln"> iter_start</span></li><li class="L5"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">time</span><span class="pun">.</span><span class="pln">ctime</span><span class="pun">(),</span><span class="pln"> </span><span class="str">': {:0.3f} {:0.3f}'</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span></li><li class="L6"><span class="pln">        iter_elapsed</span><span class="pun">,</span><span class="pln"> loop_elapsed</span><span class="pun">))</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<div class="a69fc18d" data-region="main-content" data-finished="true"><div class="group group-C"><div class="block block-176 type-custom "><div class="field field-530">
<ins class="adsbygoogle" style="display: block; text-align: center; height: 0px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7264282846152864" data-ad-slot="3929425397" data-adsbygoogle-status="done"><ins id="aswift_2_expand" style="display: inline-table; border: medium none; height: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 740px; background-color: transparent;"><ins id="aswift_2_anchor" style="display: block; border: medium none; height: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 740px; background-color: transparent; overflow: hidden; opacity: 0;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;width:740px;height:185px;" width="740" height="185" frameborder="0"></iframe></ins></ins></ins>
</div>
</div></div></div><p>Как и в случае с  функцией <span class="strong">Python time monotonic()</span>, эпоха для <span class="strong">perf_counter()</span> не определяется.  Значения предназначены для сравнения и вычисления, а не в качестве абсолютных значений:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">$ python3 time_perf_counter</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">40</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.487</span><span class="pln"> </span><span class="lit">0.487</span></li><li class="L2"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">41</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.485</span><span class="pln"> </span><span class="lit">0.973</span></li><li class="L3"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">41</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.494</span><span class="pln"> </span><span class="lit">1.466</span></li><li class="L4"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">42</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.487</span><span class="pln"> </span><span class="lit">1.953</span></li><li class="L5"><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">42</span><span class="pln"> </span><span class="lit">2016</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.480</span><span class="pln"> </span><span class="lit">2.434</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<h3>Компоненты времени</h3>
<p>Хранимое в виде прошедших секунд время используется в некоторых 
ситуациях. Но иногда программа должна иметь доступ к отдельным полям 
даты (<span class="italic">год, месяц и т. д</span>.). Модуль времени определяет <span class="strong">struct_time</span>
 для хранения значений даты и времени с разбитыми компонентами, поэтому 
они легко доступны. Существует несколько функций, которые работают со 
значениями <span class="strong">struct_time</span> вместо <span class="strong">float</span>:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">time_struct</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="kwd">import</span><span class="pln"> time</span></li><li class="L2"><span class="kwd">def</span><span class="pln"> show_struct</span><span class="pun">(</span><span class="pln">s</span><span class="pun">):</span></li><li class="L3"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_year :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_year</span><span class="pun">)</span></li><li class="L4"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_mon  :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_mon</span><span class="pun">)</span></li><li class="L5"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_mday :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_mday</span><span class="pun">)</span></li><li class="L6"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_hour :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_hour</span><span class="pun">)</span></li><li class="L7"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_min  :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_min</span><span class="pun">)</span></li><li class="L8"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_sec  :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_sec</span><span class="pun">)</span></li><li class="L9"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_wday :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_wday</span><span class="pun">)</span></li><li class="L0"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_yday :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_yday</span><span class="pun">)</span></li><li class="L1"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_isdst:'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_isdst</span><span class="pun">)</span></li><li class="L2"><span class="kwd">print</span><span class="pun">(</span><span class="str">'gmtime:'</span><span class="pun">)</span></li><li class="L3"><span class="pln">show_struct</span><span class="pun">(</span><span class="pln">time</span><span class="pun">.</span><span class="pln">gmtime</span><span class="pun">())</span></li><li class="L4"><span class="kwd">print</span><span class="pun">(</span><span class="str">'nlocaltime:'</span><span class="pun">)</span></li><li class="L5"><span class="pln">show_struct</span><span class="pun">(</span><span class="pln">time</span><span class="pun">.</span><span class="pln">localtime</span><span class="pun">())</span></li><li class="L6"><span class="kwd">print</span><span class="pun">(</span><span class="str">'nmktime:'</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">mktime</span><span class="pun">(</span><span class="pln">time</span><span class="pun">.</span><span class="pln">localtime</span><span class="pun">()))</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Функция <span class="strong">Python</span> модуля <span class="strong">time gmtime()</span> возвращает текущее время в <span class="strong">UTC</span>. <span class="strong">Localtime()</span> возвращает текущее время с использованием текущего часового пояса. <span class="strong">Mktime()</span> принимает <span class="strong">struct_time</span> и преобразует его в формат с плавающей запятой:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">$ python3 time_struct</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="pln">gmtime</span><span class="pun">:</span></li><li class="L2"><span class="pln">  tm_year </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2016</span></li><li class="L3"><span class="pln">  tm_mon  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">8</span></li><li class="L4"><span class="pln">  tm_mday </span><span class="pun">:</span><span class="pln"> </span><span class="lit">14</span></li><li class="L5"><span class="pln">  tm_hour </span><span class="pun">:</span><span class="pln"> </span><span class="lit">18</span></li><li class="L6"><span class="pln">  tm_min  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span></li><li class="L7"><span class="pln">  tm_sec  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">42</span></li><li class="L8"><span class="pln">  tm_wday </span><span class="pun">:</span><span class="pln"> </span><span class="lit">6</span></li><li class="L9"><span class="pln">  tm_yday </span><span class="pun">:</span><span class="pln"> </span><span class="lit">227</span></li><li class="L0"><span class="pln">  tm_isdst</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span></li><li class="L1"><span class="pln">localtime</span><span class="pun">:</span></li><li class="L2"><span class="pln">  tm_year </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2016</span></li><li class="L3"><span class="pln">  tm_mon  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">8</span></li><li class="L4"><span class="pln">  tm_mday </span><span class="pun">:</span><span class="pln"> </span><span class="lit">14</span></li><li class="L5"><span class="pln">  tm_hour </span><span class="pun">:</span><span class="pln"> </span><span class="lit">14</span></li><li class="L6"><span class="pln">  tm_min  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span></li><li class="L7"><span class="pln">  tm_sec  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">42</span></li><li class="L8"><span class="pln">  tm_wday </span><span class="pun">:</span><span class="pln"> </span><span class="lit">6</span></li><li class="L9"><span class="pln">  tm_yday </span><span class="pun">:</span><span class="pln"> </span><span class="lit">227</span></li><li class="L0"><span class="pln">  tm_isdst</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span></li><li class="L1"><span class="pln">mktime</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1471198242.0</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<h3>Работа с часовыми поясами</h3>
<p>Выбор функции для определения текущего времени зависит от того, 
установлен ли часовой пояс программой или системой. Изменение часового 
пояса не изменяет фактическое время — только способ его представления.</p>
<p>Чтобы изменить часовой пояс, установите переменную среды <span class="strong">TZ</span>, затем вызовите <span class="strong">tzset()</span>. Часовой пояс можно указать с различными данными, вплоть до времени начала и завершения периода так называемого «<span class="italic">летнего</span>» времени. Проще всего использовать название часового пояса, но базовые библиотеки получают и другую информацию.</p>
<p>Приведенная ниже программа без <span class="strong">Python time sleep</span>, и задает несколько разных значений для часового пояса и показывает, как изменения влияют на другие настройки в модуле времени:</p>
<div class="a69fc18d" data-region="main-content" data-finished="true"><div class="group group-D"><div class="block block-177 type-custom "><div class="field field-531">
<ins class="adsbygoogle" style="display: block; text-align: center; height: 185px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7264282846152864" data-ad-slot="2005011772" data-adsbygoogle-status="done"><ins id="aswift_3_expand" style="display:inline-table;border:none;height:185px;margin:0;padding:0;position:relative;visibility:visible;width:740px;background-color:transparent;"><ins id="aswift_3_anchor" style="display:block;border:none;height:185px;margin:0;padding:0;position:relative;visibility:visible;width:740px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_3" name="aswift_3" style="left:0;position:absolute;top:0;width:740px;height:185px;" width="740" height="185" frameborder="0"></iframe></ins></ins></ins>
</div>
</div></div></div><div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">time_timezone</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="kwd">import</span><span class="pln"> time</span></li><li class="L2"><span class="kwd">import</span><span class="pln"> os</span></li><li class="L3"><span class="kwd">def</span><span class="pln"> show_zone_info</span><span class="pun">():</span></li><li class="L4"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  TZ    :'</span><span class="pun">,</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">environ</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'TZ'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'(not set)'</span><span class="pun">))</span></li><li class="L5"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tzname:'</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">tzname</span><span class="pun">)</span></li><li class="L6"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  Zone  : {} ({})'</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span></li><li class="L7"><span class="pln">        time</span><span class="pun">.</span><span class="pln">timezone</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">time</span><span class="pun">.</span><span class="pln">timezone </span><span class="pun">/</span><span class="pln"> </span><span class="lit">3600</span><span class="pun">)))</span></li><li class="L8"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  DST   :'</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">daylight</span><span class="pun">)</span></li><li class="L9"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  Time  :'</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">ctime</span><span class="pun">())</span></li><li class="L0"><span class="pln">    </span><span class="kwd">print</span><span class="pun">()</span></li><li class="L1"><span class="kwd">print</span><span class="pun">(</span><span class="str">'Default :'</span><span class="pun">)</span></li><li class="L2"><span class="pln">show_zone_info</span><span class="pun">()</span></li><li class="L3"><span class="pln">ZONES </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span></li><li class="L4"><span class="pln">    </span><span class="str">'GMT'</span><span class="pun">,</span></li><li class="L5"><span class="pln">    </span><span class="str">'Europe/Amsterdam'</span><span class="pun">,</span></li><li class="L6"><span class="pun">]</span></li><li class="L7"><span class="kwd">for</span><span class="pln"> zone </span><span class="kwd">in</span><span class="pln"> ZONES</span><span class="pun">:</span></li><li class="L8"><span class="pln">    os</span><span class="pun">.</span><span class="pln">environ</span><span class="pun">[</span><span class="str">'TZ'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> zone</span></li><li class="L9"><span class="pln">    time</span><span class="pun">.</span><span class="pln">tzset</span><span class="pun">()</span></li><li class="L0"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">zone</span><span class="pun">,</span><span class="pln"> </span><span class="str">':'</span><span class="pun">)</span></li><li class="L1"><span class="pln">    show_zone_info</span><span class="pun">()</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Часовой пояс по умолчанию для системы, используемой в примерах — <span class="strong">US / Eastern</span>. Другие зоны в примере <span class="strong">Python</span> модуля <span class="strong">time</span> изменяют значение <span class="strong">tzname</span>, продолжительности светового дня и значение смещения часового пояса:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">$ python3 time_timezone</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="typ">Default</span><span class="pln"> </span><span class="pun">:</span></li><li class="L2"><span class="pln">  TZ    </span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">not</span><span class="pln"> </span><span class="kwd">set</span><span class="pun">)</span></li><li class="L3"><span class="pln">  tzname</span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="str">'EST'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'EDT'</span><span class="pun">)</span></li><li class="L4"><span class="pln">  </span><span class="typ">Zone</span><span class="pln">  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">18000</span><span class="pln"> </span><span class="pun">(</span><span class="lit">5.0</span><span class="pun">)</span></li><li class="L5"><span class="pln">  DST   </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span></li><li class="L6"><span class="pln">  </span><span class="typ">Time</span><span class="pln">  </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">42</span><span class="pln"> </span><span class="lit">2016</span></li><li class="L7"><span class="pln">GMT </span><span class="pun">:</span></li><li class="L8"><span class="pln">  TZ    </span><span class="pun">:</span><span class="pln"> GMT</span></li><li class="L9"><span class="pln">  tzname</span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="str">'GMT'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'GMT'</span><span class="pun">)</span></li><li class="L0"><span class="pln">  </span><span class="typ">Zone</span><span class="pln">  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">(</span><span class="lit">0.0</span><span class="pun">)</span></li><li class="L1"><span class="pln">  DST   </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span></li><li class="L2"><span class="pln">  </span><span class="typ">Time</span><span class="pln">  </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">18</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">42</span><span class="pln"> </span><span class="lit">2016</span></li><li class="L3"><span class="typ">Europe</span><span class="pun">/</span><span class="typ">Amsterdam</span><span class="pln"> </span><span class="pun">:</span></li><li class="L4"><span class="pln">  TZ    </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Europe</span><span class="pun">/</span><span class="typ">Amsterdam</span></li><li class="L5"><span class="pln">  tzname</span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="str">'CET'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'CEST'</span><span class="pun">)</span></li><li class="L6"><span class="pln">  </span><span class="typ">Zone</span><span class="pln">  </span><span class="pun">:</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3600</span><span class="pln"> </span><span class="pun">(-</span><span class="lit">1.0</span><span class="pun">)</span></li><li class="L7"><span class="pln">  DST   </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span></li><li class="L8"><span class="pln">  </span><span class="typ">Time</span><span class="pln">  </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Sun</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="lit">20</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">42</span><span class="pln"> </span><span class="lit">2016</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<h3>Обработка и форматирование времени</h3>
<p>Функции <span class="strong">strptime()</span> и <span class="strong">strftime()</span> преобразуют <span class="strong">struct_time</span>
 в строковые представления значений времени и наоборот. Существует 
длинный список инструкций по форматированию для поддержки ввода и вывода
 в разных форматах. Полный список указан в документации библиотеки для 
модуля time.</p>
<p>В приведенном ниже примере <span class="strong">Python time</span> текущее время преобразуется из строки в экземпляр <span class="strong">struct_time</span> и обратно в строку:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">time_strptime</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="kwd">import</span><span class="pln"> time</span></li><li class="L2"><span class="kwd">def</span><span class="pln"> show_struct</span><span class="pun">(</span><span class="pln">s</span><span class="pun">):</span></li><li class="L3"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_year :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_year</span><span class="pun">)</span></li><li class="L4"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_mon  :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_mon</span><span class="pun">)</span></li><li class="L5"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_mday :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_mday</span><span class="pun">)</span></li><li class="L6"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_hour :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_hour</span><span class="pun">)</span></li><li class="L7"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_min  :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_min</span><span class="pun">)</span></li><li class="L8"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_sec  :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_sec</span><span class="pun">)</span></li><li class="L9"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_wday :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_wday</span><span class="pun">)</span></li><li class="L0"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_yday :'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_yday</span><span class="pun">)</span></li><li class="L1"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'  tm_isdst:'</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">tm_isdst</span><span class="pun">)</span></li><li class="L2"><span class="pln">now </span><span class="pun">=</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">ctime</span><span class="pun">(</span><span class="lit">1483391847.433716</span><span class="pun">)</span></li><li class="L3"><span class="kwd">print</span><span class="pun">(</span><span class="str">'Now:'</span><span class="pun">,</span><span class="pln"> now</span><span class="pun">)</span></li><li class="L4"><span class="pln">parsed </span><span class="pun">=</span><span class="pln"> time</span><span class="pun">.</span><span class="pln">strptime</span><span class="pun">(</span><span class="pln">now</span><span class="pun">)</span></li><li class="L5"><span class="kwd">print</span><span class="pun">(</span><span class="str">'nParsed:'</span><span class="pun">)</span></li><li class="L6"><span class="pln">show_struct</span><span class="pun">(</span><span class="pln">parsed</span><span class="pun">)</span></li><li class="L7"><span class="kwd">print</span><span class="pun">(</span><span class="str">'nFormatted:'</span><span class="pun">,</span></li><li class="L8"><span class="pln">      time</span><span class="pun">.</span><span class="pln">strftime</span><span class="pun">(</span><span class="str">"%a %b %d %H:%M:%S %Y"</span><span class="pun">,</span><span class="pln"> parsed</span><span class="pun">))</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>В примере с <span class="strong">time strftime Python</span> строка вывода не такая же, как и входная, так как день месяца имеет префикс с нулем:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">$ python3 time_strptime</span><span class="pun">.</span><span class="pln">py</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="typ">Now</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Mon</span><span class="pln"> </span><span class="typ">Jan</span><span class="pln">  </span><span class="lit">2</span><span class="pln"> </span><span class="lit">16</span><span class="pun">:</span><span class="lit">17</span><span class="pun">:</span><span class="lit">27</span><span class="pln"> </span><span class="lit">2017</span></li><li class="L3"><span class="pln"> </span></li><li class="L4"><span class="typ">Parsed</span><span class="pun">:</span></li><li class="L5"><span class="pln">  tm_year </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2017</span></li><li class="L6"><span class="pln">  tm_mon  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span></li><li class="L7"><span class="pln">  tm_mday </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span></li><li class="L8"><span class="pln">  tm_hour </span><span class="pun">:</span><span class="pln"> </span><span class="lit">16</span></li><li class="L9"><span class="pln">  tm_min  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">17</span></li><li class="L0"><span class="pln">  tm_sec  </span><span class="pun">:</span><span class="pln"> </span><span class="lit">27</span></li><li class="L1"><span class="pln">  tm_wday </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span></li><li class="L2"><span class="pln">  tm_yday </span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span></li><li class="L3"><span class="pln">  tm_isdst</span><span class="pun">:</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span></li><li class="L4"><span class="pln"> </span></li><li class="L5"><span class="typ">Formatted</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Mon</span><span class="pln"> </span><span class="typ">Jan</span><span class="pln"> </span><span class="lit">02</span><span class="pln"> </span><span class="lit">16</span><span class="pun">:</span><span class="lit">17</span><span class="pun">:</span><span class="lit">27</span><span class="pln"> </span><span class="lit">2017</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Перевод статьи «<a href="https://pymotw.com/3/time/" target="_blank" rel="nofollow noopener" class="ym-external-link">time — Clock Time</a>» дружной командой проекта <a href="http://www.internet-technologies.ru/" target="_blank">Сайтостроение от А до Я</a>.</p>
    </main>
</body>
</html></p></body></html>