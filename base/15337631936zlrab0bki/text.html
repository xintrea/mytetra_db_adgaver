<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<html>
<main>
        <h1>Текстовая обработка в языке Python. Подсказки для начинающих.</h1>
        <p>Как и ряд других популярных скриптовых языков, Python 
является великолепным инструментом для сканирования и манипуляций с 
текстовыми данными. Эта статья суммирует возможности текстовой обработки
 языка Python для тех программистов, которые являются новичками в 
программировании на языке Python. Эта статья объясняет некоторые 
основные понятия регулярных выражений и предлагает советы, когда стоит 
(а когда — не стоит) использовать регулярные выражения при обработке 
текста.</p>
<h3>Что такое Python?</h3>
<p>Python — это свободно доступный, интерпретируемый язык очень высокого
 уровня, разработанный Гвидо ван Россумом. Он объединяет ясный синтаксис
 с мощной (но необязательной) объектно-ориентированной семантикой. 
Python широко распространен и высокопортабелен.</p>
<h3>Строки — неизменяемые последовательности</h3>
<p>Как и в большинстве высокоуровневых языков программирования, строки 
переменной длины являются базовым типом в языке Python. Python выделяет 
область памяти для хранения строк (или других значений) «за кулисами», 
там, где программисту не нужно особенно задумываться об этом. Кроме 
того, Python имеет несколько возможностей управления строками, 
отсутствующих в других высокоуровневых языках.</p>
<p>В языке Python строки представляют собой «неизменяемые 
последовательности» («immutable sequences»). Программа может обращаться к
 элементам или подпоследовательностям строк как к любым 
последовательностям, несмотря на то, что строки, как и кортежи (tuples),
 не могут быть изменены непосредственно «на месте». Python обращается к 
подпоследовательностям с помощью гибкой операции «среза», формат которой
 напоминает задание диапазона строк и столбцов в электронной таблице. 
Приведенная ниже интерактивная сессия иллюстрирует использование строк и
 срезов.</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="str">"mary has a little lamb"</span></li><li class="L1"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="com"># индекс с отсчетом от нуля</span></li><li class="L2"><span class="str">'m'</span></li><li class="L3"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'x'</span><span class="pln"> </span><span class="com"># непосредственное изменение элемента не удается</span></li><li class="L4"><span class="typ">Traceback</span><span class="pln"> </span><span class="pun">(</span><span class="pln">innermost </span><span class="kwd">last</span><span class="pun">):</span></li><li class="L5"><span class="typ">File</span><span class="pln"> </span><span class="str">"&lt;stdin&gt;"</span><span class="pun">,</span><span class="pln"> line </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">?</span></li><li class="L6"><span class="typ">TypeError</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> doesn</span><span class="str">'t support item assignment</span></li><li class="L7"><span class="str">&gt;&gt;&gt; s[11:18] # '</span><span class="pun">вырезать</span><span class="str">' подпоследовательность</span></li><li class="L8"><span class="str">'</span><span class="pln">little </span><span class="str">'</span></li><li class="L9"><span class="str">&gt;&gt;&gt; s[:4] # пустое начало среза предполагает нуль</span></li><li class="L0"><span class="str">'</span><span class="pln">mary</span><span class="str">'</span></li><li class="L1"><span class="str">&gt;&gt;&gt; s[4] # индекс 4 не включен в срез [:4]</span></li><li class="L2"><span class="str">'</span><span class="pln"> </span><span class="str">'</span></li><li class="L3"><span class="str">&gt;&gt;&gt; s[5:-5] # может использоваться индекс "с конца" с отрицательными числами</span></li><li class="L4"><span class="str">'</span><span class="pln">had a little</span><span class="str">'</span></li><li class="L5"><span class="str">&gt;&gt;&gt; s[:5]+s[5:] # соединение начала и конца среза</span></li><li class="L6"><span class="str">'</span><span class="pln">mary had a little lamb</span><span class="str">'</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Другая мощная строковая операция — просто ключевое слово in. Оно предлагает две интуитивные и полезные конструкции:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="str">"mary had a little lamb"</span></li><li class="L1"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> c </span><span class="kwd">in</span><span class="pln"> s</span><span class="pun">[</span><span class="lit">11</span><span class="pun">:</span><span class="lit">18</span><span class="pun">]:</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> </span><span class="com"># печать каждого символа в срезе</span></li><li class="L2"><span class="pun">...</span></li><li class="L3"><span class="pln">l i t t l e</span></li><li class="L4"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="str">'x'</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> s</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> </span><span class="str">'got x'</span><span class="pln"> </span><span class="com"># проверка на вхождение символа</span></li><li class="L5"><span class="pun">...</span></li><li class="L6"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="str">'y'</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> s</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> </span><span class="str">'got y'</span><span class="pln"> </span><span class="com"># проверка на вхождение символа</span></li><li class="L7"><span class="pun">...</span></li><li class="L8"><span class="pln">got y</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<div class="a69fc18d" data-region="main-content" data-finished="true"><div class="group group-A"><div class="block block-174 type-custom "><div class="field field-528">
<ins class="adsbygoogle" style="display: block; text-align: center; height: 185px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7264282846152864" data-ad-slot="1901069998" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:185px;margin:0;padding:0;position:relative;visibility:visible;width:740px;background-color:transparent;"><ins id="aswift_0_anchor" style="display:block;border:none;height:185px;margin:0;padding:0;position:relative;visibility:visible;width:740px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;width:740px;height:185px;" width="740" height="185" frameborder="0"></iframe></ins></ins></ins>
</div>
</div></div></div><p>Есть несколько способов написания строковых 
констант в языке Python. Вы можете использовать как одинарные, так и 
двойные кавычки при условии, пока символы открытия и закрытия 
соответствуют друг другу, и существует ряд других полезных вариантов. 
Если ваша строка содержит переводы строки или вложенные кавычки, тройные
 кавычки предоставляют удобный способ такого рода строк, как это сделано
 в следующем примере:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s2 </span><span class="pun">=</span><span class="pln"> </span><span class="str">"""Mary had a little lamb</span></li><li class="L1"><span class="str">... its fleece was white as snow</span></li><li class="L2"><span class="str">... and everywhere that Mary went</span></li><li class="L3"><span class="str">... the lamb was sure to go"""</span></li><li class="L4"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> s2</span></li><li class="L5"><span class="typ">Mary</span><span class="pln"> had a little lamb</span></li><li class="L6"><span class="pln">its fleece was white </span><span class="kwd">as</span><span class="pln"> snow</span></li><li class="L7"><span class="kwd">and</span><span class="pln"> everywhere that </span><span class="typ">Mary</span><span class="pln"> went</span></li><li class="L8"><span class="pln">the lamb was sure to go</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Как одинарные, так и тройные кавычки могут предваряться буквой "r" 
для обозначения того, что специальные символы регулярных выражений не 
должны интерпретироваться Python. Например:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s3 </span><span class="pun">=</span><span class="pln"> </span><span class="str">"this n and n that"</span></li><li class="L1"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> s3</span></li><li class="L2"><span class="kwd">this</span></li><li class="L3"><span class="kwd">and</span></li><li class="L4"><span class="pln">that</span></li><li class="L5"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s4 </span><span class="pun">=</span><span class="pln"> r</span><span class="str">"this n and n that"</span></li><li class="L6"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> s4</span></li><li class="L7"><span class="kwd">this</span><span class="pln"> n </span><span class="kwd">and</span><span class="pln"> n that</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>В «r-строках» обратный слэш, который в иных случаях может служить для
 задания специального символа, обрабатывается как обычный обратный слэш.
 Это объясняется далее при рассмотрении регулярных выражений.</p>
<h3>Файлы и строковые переменные</h3>
<p>Когда мы говорим «текстовая обработка», мы обычно подразумеваем 
обработку содержимого файла. На языке Python не составляет труда считать
 содержимое текстового файла в строковые переменные, где этим содержимым
 можно манипулировать. Файловые объекты обеспечивают три метода чтения: 
.read(), .readline(), and .readlines(). Каждый из этих методов может 
принимать аргумент для ограничения объема данных, считываемых за один 
раз, однако в основном они используются без аргумента. .read() считывает
 весь файл за один раз, и обычно используется для помещения содержимого 
файла в строковую переменную. Хотя .read() дает наиболее прямое 
строковое представление содержимого файла, он неудобен для 
последовательной строчно-ориентированной обработки файла, к тому же это 
невозможно, если размер файла превышает объем имеющейся памяти.</p>
<p>.readline() и .readlines() очень похожи. И та и другая используются в конструкциях наподобие следующей:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">fh </span><span class="pun">=</span><span class="pln"> open</span><span class="pun">(</span><span class="str">'c:\autoexec.bat'</span><span class="pun">)</span></li><li class="L1"><span class="kwd">for</span><span class="pln"> line </span><span class="kwd">in</span><span class="pln"> fh</span><span class="pun">.</span><span class="pln">readlines</span><span class="pun">():</span></li><li class="L2"><span class="kwd">print</span><span class="pln"> line</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Различие между .readline() и .readlines() в том, что последняя, как и
 .read(), считывает весь файл за один раз. .readlines() автоматически 
парсит содержимое файла в список строк, который может быть обработан с 
помощью конструкции языка Python for … in ….</p>
<div class="a69fc18d" data-region="main-content" data-finished="true"><div class="group group-B"><div class="block block-175 type-custom "><div class="field field-555">

<ins class="adsbygoogle" style="display:inline-block;width:580px;height:400px" data-ad-client="ca-pub-7264282846152864" data-ad-slot="4724268713" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:400px;margin:0;padding:0;position:relative;visibility:visible;width:580px;background-color:transparent;"><ins id="aswift_1_anchor" style="display:block;border:none;height:400px;margin:0;padding:0;position:relative;visibility:visible;width:580px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;width:580px;height:400px;" width="580" height="400" frameborder="0"></iframe></ins></ins></ins>
</div>
</div></div></div><p>С другой стороны, .readline() считывает только одну
 строку за раз, и в целом работает гораздо медленнее, чем .readlines(). 
.readline() следует использовать, только если памяти не хватает для 
считывания всего файла за один раз.</p>
<p>Если вы используете стандартный модуль, работающий с файлами, вы 
можете превратить строку в "виртуальный файл" с помощью модуля cStringIO
 (если требуется создание производных классов, можно использовать 
StringIO, но начинающим это требуется редко).</p>
<p>Например:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> cStringIO</span></li><li class="L1"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> fh </span><span class="pun">=</span><span class="pln"> cStringIO</span><span class="pun">.</span><span class="typ">StringIO</span><span class="pun">()</span></li><li class="L2"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> fh</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="str">"mary had a little lamb"</span><span class="pun">)</span></li><li class="L3"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> fh</span><span class="pun">.</span><span class="pln">getvalue</span><span class="pun">()</span></li><li class="L4"><span class="str">'mary had a little lamb'</span></li><li class="L5"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> fh</span><span class="pun">.</span><span class="pln">seek</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></li><li class="L6"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> fh</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="str">'ATE'</span><span class="pun">)</span></li><li class="L7"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> fh</span><span class="pun">.</span><span class="pln">getvalue</span><span class="pun">()</span></li><li class="L8"><span class="str">'mary ATE a little lamb'</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Не забывайте, однако, что, в отличие от настоящего файла, 
«виртуальный файл», сформированный cStringIO — временный. Он исчезнет, 
когда программа завершится, если вы не предпримете каких-либо шагов, 
чтобы его сохранить (например, запишете его в реальный файл или 
воспользуетесь модулем shelve либо базой данных).</p>
<h3>Стандартный модуль: string</h3>
<p>Модуль string, возможно, в целом наиболее полезный модуль стандартных
 дистрибутивов языка Python 1.5.*. На самом деле похоже, что многие из 
возможностей модуля string будут существовать в качестве встроенных 
строковых методов в Python 1.6 и выше (подробности еще не были 
опубликованы на момент написания этой статьи). Наиболее вероятно, что 
любая программа, выполняющая обработку текста, должна начинаться со 
строки:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="kwd">import</span><span class="pln"> </span><span class="kwd">string</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Основное правило состоит в том, что если вы можете решить задачу с 
помощью модуля string, это правильный способ ее решения. В отличие от re
 (регулярных выражений), функции string в целом гораздо быстрее и в 
большинстве случаев проще для понимания и использования. Сторонние 
модули языка Python, включая и некоторые быстрые, написанные на С 
расширения, предназначены для специализированных задач, однако 
переносимость и простота, тем не менее, определяют привязку к string 
везде, где только возможно. Есть и исключения, однако не так много, как 
вы можете подумать, имея опыт использования других языков.</p>
<p>Модуль string содержит несколько типов инструментов, таких как 
функции, методы и классы. Он также содержит наиболее общие строковые 
константы. Например:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">string</span></li><li class="L1"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">whitespace</span></li><li class="L2"><span class="str">'1112131415 '</span></li><li class="L3"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">uppercase</span></li><li class="L4"><span class="str">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Хотя вы можете написать эти константы сами, версии string более или 
менее гарантируют, что ваши константы будут правильны с точки зрения 
национального языка и платформы, на которой выполняется ваш скрипт на 
Python.</p>
<div class="a69fc18d" data-region="main-content" data-finished="true"><div class="group group-C"><div class="block block-176 type-custom "><div class="field field-530">
<ins class="adsbygoogle" style="display: block; text-align: center; height: 185px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7264282846152864" data-ad-slot="3929425397" data-adsbygoogle-status="done"><ins id="aswift_2_expand" style="display:inline-table;border:none;height:185px;margin:0;padding:0;position:relative;visibility:visible;width:740px;background-color:transparent;"><ins id="aswift_2_anchor" style="display:block;border:none;height:185px;margin:0;padding:0;position:relative;visibility:visible;width:740px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;width:740px;height:185px;" width="740" height="185" frameborder="0"></iframe></ins></ins></ins>
</div>
</div></div></div><p>string также включает функции, преобразующие строки
 обычными способами (которые вы можете объединить для получения 
некоторых необычных преобразований). Например:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">string</span></li><li class="L1"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="str">"mary had a little lamb"</span></li><li class="L2"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">capwords</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span></li><li class="L3"><span class="str">'Mary Had A Little Lamb'</span></li><li class="L4"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="pln"> </span><span class="str">'little'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'fercious'</span><span class="pun">)</span></li><li class="L5"><span class="str">'mary had a ferocious lamb'</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Существут множество других преобразований, не проиллюстрированных 
здесь особо; вы можете найти подробности в руководстве по языку Python. 
Кроме того, вы можете пользоваться функциями string для получения 
информации о таких атрибутах строки, как длина или позиции подстроки, 
например:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">string</span></li><li class="L1"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="str">"mary had a little lamb"</span></li><li class="L2"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="pln"> </span><span class="str">'had'</span><span class="pun">)</span></li><li class="L3"><span class="lit">5</span></li><li class="L4"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">count</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">)</span></li><li class="L5"><span class="lit">4</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>И наконец, string предоставляет очень характерную для языка Python 
особенность. Пара .split() и .join() обеспечивает быстрый способ 
преобразования строк в кортежи и наоборот, что вы найдете весьма 
полезным. Реализуется это просто:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">string</span></li><li class="L1"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="str">"mary had a little lamb"</span></li><li class="L2"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> L </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span></li><li class="L3"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> L</span></li><li class="L4"><span class="pun">[</span><span class="str">'mary'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'had'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'little'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'lamb'</span><span class="pun">],</span><span class="pln">br</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="kwd">join</span><span class="pun">(</span><span class="pln">L</span><span class="pun">,</span><span class="pln"> </span><span class="str">"-"</span><span class="pun">)</span></li><li class="L5"><span class="str">'mary-had-a-little-lamb'</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Безусловно, в реальной жизни вы скорее всего будете делать со списком
 что-то еще, кроме немедленного объединения его вызовом .join() 
(возможно, что-то, включающее знакомую конструкцию for…in…).</p>
<h3>Стандартный модуль: re</h3>
<p>Модуль re делает устаревшими модули regex и regsub, которые 
использовались в старых кодах на языке Python. Хотя в использовании 
regex сохраняются небольшие преимущества, они незначительны и не стоят 
того, чтобы использовать его в в новом коде. Устаревшие модули скорее 
всего будут исключены из новых версий Python, и в 1.6, возможно, будет 
включен усовершенствованный модуль re. Так что пользуйтесь re для 
регулярных выражений.</p>
<p>Регулярные выражения сложны. Можно написать книгу на эту тему, и это 
на самом деле многие сделали! Эта статья постарается ухватить «гештальт»
 (базовую суть) регулярных выражений и позволит читателю извлечь ее.</p>
<p>Регулярное выражение — это краткий путь к описанию образцов 
(pattern), которые могут встретиться в тексте. Встречаются ли некие 
символы? В определенном ли порядке? Повторяются ли участки текста данное
 число раз? Исключено ли совпадение других участков? Концептуально это 
не так уж непохоже на то, как вы интуитивно описываете понятие образца 
на естественном языке. Хитрость состоит в кодировке этого описания в 
компактный синтаксис регулярных выражений.</p>
<p>Рассматривайте регулярное выражение как отдельную проблему 
программирования, несмотря на то, что в нем могут быть задействованы 
только одна-две строки кода; эти строки, в сущности, составляют 
небольшую программу.</p>
<div class="a69fc18d" data-region="main-content" data-finished="true"><div class="group group-D"><div class="block block-177 type-custom "><div class="field field-531">
<ins class="adsbygoogle" style="display: block; text-align: center; height: 185px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7264282846152864" data-ad-slot="2005011772" data-adsbygoogle-status="done"><ins id="aswift_3_expand" style="display:inline-table;border:none;height:185px;margin:0;padding:0;position:relative;visibility:visible;width:740px;background-color:transparent;"><ins id="aswift_3_anchor" style="display:block;border:none;height:185px;margin:0;padding:0;position:relative;visibility:visible;width:740px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_3" name="aswift_3" style="left:0;position:absolute;top:0;width:740px;height:185px;" width="740" height="185" frameborder="0"></iframe></ins></ins></ins>
</div>
</div></div></div><p>Начните с самых маленьких фрагментов. На нижнем 
уровне любое регулярное выражение будет включать сопоставление с 
конкретными «символьными классами» («character classes»). Простейший 
символьный класс представляет собой отдельный символ, который просто 
входит в образец как литерал. Вам часто может понадобиться сопоставить 
класс символов. Вы можете обозначить класс, заключив его в квадратные 
скобки; внутри скобок вы можете поместить как набор, так и диапазоны 
символов, которые обозначаются тире. Кроме того, вы можете использовать 
различные именованные символьные классы, корректные для вашей платформы и
 национального языка. Несколько примеров:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> re</span></li><li class="L1"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> </span><span class="str">"mary had a little lamb"</span></li><li class="L2"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> re</span><span class="pun">.</span><span class="pln">search</span><span class="pun">(</span><span class="str">"m"</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">):</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> </span><span class="str">"Match!"</span><span class="pln"> </span><span class="com"># char literal</span></li><li class="L3"><span class="pun">...</span></li><li class="L4"><span class="typ">Match</span><span class="pun">!</span></li><li class="L5"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> re</span><span class="pun">.</span><span class="pln">search</span><span class="pun">(</span><span class="str">"[@A-Z]"</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">):</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> </span><span class="str">"Match!"</span><span class="pln"> </span><span class="com"># char class</span></li><li class="L6"><span class="pun">...</span><span class="pln"> </span><span class="com"># match either at-sign or capital letter</span></li><li class="L7"><span class="pun">...</span></li><li class="L8"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> re</span><span class="pun">.</span><span class="pln">search</span><span class="pun">(</span><span class="str">"d"</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">):</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> </span><span class="str">"Match!"</span><span class="pln"> </span><span class="com"># digits class</span></li><li class="L9"><span class="pun">...</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Вы можете представлять символьные классы в виде "атомов" регулярных 
выражений и скорее всего захотите сгруппировать эти атомы в "молекулы". 
Это можно сделать с помощью комбинации группировки и повторения. 
Группировка обозначается круглыми скобками: каждое из подвыражений, 
содержащихся в скобках, рассматривается как атомарное для последующей 
группировки или повторения. Повторение отмечается одним из следующих 
операторов: "*" означающего "нуль или более"; "+" означающего "один или 
более"; "?" означающего "нуль или один". В качестве примера взгляните на
 выражение:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">ABC</span><span class="pun">([</span><span class="pln">d</span><span class="pun">-</span><span class="pln">w</span><span class="pun">]*</span><span class="pln">dd</span><span class="pun">?)+</span><span class="pln">XYZ</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Чтобы строка соответствовала этому выражению, она должна содержать 
нечто, начинающееся с "ABC" и заканчивающееся на "XYZ" — но что должно 
быть в середине? Средним подвыражением является ([d-w]*dd?), 
сопровождаемое оператором "один или много". Таким образом, середина 
строки должна состоять из одного (или двух, или одной тысячи) 
фрагментов, соответствующих подвыражению в скобках. Строка "ABCXYZ" ему 
не соответствует, так как не содержит необходимых элементов в середине.</p>
<p>Что же представляет собой это внутреннее подвыражение? Оно начинается
 с нуля или более букв в интервале от d до w. Важно отметить, что нуль 
букв представляет правильное сопоставление, которое может быть 
контринтуитивным, если вы воспользуетесь для его описания словом 
"несколько". В следующей строке должна быть в точности одна цифра; затем
 ни одной или одна дополнительная цифра. (Первый цифровой символьный 
класс не имеет оператора повторения, тем самым просто встречается один 
раз. Второй цифровой символьный класс имеет оператор "?"). Короче 
говоря, все это подразумевает "одну или несколько цифр". Некоторые 
удовлетворяющие регулярному выражению строки выглядят так:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">ABC1234567890XYZ</span></li><li class="L1"><span class="typ">ABCd12e1f37g3XYZ</span></li><li class="L2"><span class="pln">ABC1XYZ</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>А вот несколько выражений, которые не сопоставляются c этим выражением:</p>
<div class="prettyprint-wrap"><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><ol class="linenums"><li class="L0"><span class="pln">ABC123456789dXYZ</span></li><li class="L1"><span class="typ">ABCdefghijklmnopqrstuvwXYZ</span></li><li class="L2"><span class="typ">ABcd12e1f37g3XYZ</span></li><li class="L3"><span class="pln">ABC12345</span><span class="pun">%</span><span class="lit">67890XYZ</span></li><li class="L4"><span class="pln">ABCD12E1F37G3XYZ</span></li></ol></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></div>
<p>Потребуется некоторая практика, чтобы научиться созданию и пониманию 
регулярных выражений. Однако как только вы освоите регулярные выражения,
 в вашем распоряжении окажется мощная выразительная сила. Все это 
говорит о том, что часто проще использовать регулярные выражения для 
решения проблемы, которая вполне может быть решена и с помощью более 
примитивных (и быстрых) инструментов, например модуля string.</p>
    </main>
</body>
</html></p></body></html>