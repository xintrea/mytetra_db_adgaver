<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:9pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:xx-large; font-weight:600;">7. Ввод и вывод </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="aswift_0_expand"></a><a href="http://pythoner.name/documentation/tutorial/output#fancier-output-formatting"><span style=" text-decoration: underline; color:#0000ff;">7</span></a><span style=" text-decoration: underline; color:#0000ff;">.1. Особенности форматирования вывода</span> </li>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://pythoner.name/documentation/tutorial/output#old-string-formatting"><span style=" text-decoration: underline; color:#0000ff;">7.1.1. Старое форматирование строк</span></a> </li></ul>
<li style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://pythoner.name/documentation/tutorial/output#reading-and-writing-files"><span style=" text-decoration: underline; color:#0000ff;">7.2. Чтение и запись файлов</span></a> </li></ul>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://pythoner.name/documentation/tutorial/output#methods-of-file-objects"><span style=" text-decoration: underline; color:#0000ff;">7.2.1. Методы файловых объектов</span></a> </li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://pythoner.name/documentation/tutorial/output#saving-structured-data-with-json"><span style=" text-decoration: underline; color:#0000ff;">7.2.2. Сохранение структурированных данных с помощью json</span></a> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Существует несколько способов представить вывод программы; данные могут быть напечатаны в читаемой форме или записаны в файл для будущего использования. В этой главе будут рассмотрены некоторые из этих возможностей. </p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="fancier-output-formatting"></a><span style=" font-size:x-large; font-weight:600;">7</span><span style=" font-size:x-large; font-weight:600;">.1. Особенности форматирования вывода</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">До сих пор мы сталкивались с двумя способами вывода значений: операторы выражений и функция <a href="http://pythoner.name/documentation/library/functions#print"><span style=" text-decoration: underline; color:#0000ff;">print()</span></a>. (Третий способ - это использование метода write() файловых объектов; на файл стандартного вывода можно ссылаться как на <span style=" font-family:'Courier New,courier';">sys.stdout</span>. См. Справку по библиотеке для дополнительной информации об этом.) </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чаще вам захочется больше контроля над форматированием вашего вывода, чем простое печатание разделенных пробелом значений. Есть два способа форматировать ваш вывод; первый способ - чтобы все строки обрабатывали сами себя; используя нарезание строк и операторы конкатенации, вы можете создать любую разметку, какое можете представить. Строковый тип имеет несколько методов, которые выполняют полезные операции для обивки строк данной шириной столбца; скоро они будут обсуждаться. Второй способ - использовать formatted string literals (docs.python.org/3/reference/lexical_analysis.html#f-strings) или метод <a href="http://pythoner.name/documentation/library/stdtypes#str.format"><span style=" text-decoration: underline; color:#0000ff;">str.format()</span></a>. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Модуль string (docs.python.org/3/library/string.html#module-string) содержит класс Template (docs.python.org/3/library/string.html#string.Template), который предлагает еще один способ подстановки значений в строки. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Конечно остается один вопрос: как вы конвертируете значения в строки? К счастью Python имеет способы конвертации любого значения в строку: передайте его функции <a href="http://pythoner.name/documentation/library/functions#repr"><span style=" text-decoration: underline; color:#0000ff;">repr()</span></a> или <a href="http://pythoner.name/documentation/library/stdtypes#str"><span style=" text-decoration: underline; color:#0000ff;">str()</span></a>. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Функция str() подразумевалась для возврата представлений значений, которые достаточно читабельны, тогда как repr() подразумевалась для генерации представлений, которые могут быть прочитаны интерпретатором (или приведут к SyntaxError (docs.python.org/3/library/exceptions.html#SyntaxError), если не окажется эквивалентного синтаксиса). Для объектов, которые не имеют конкретного представления для восприятия человеком, str() вернет то же самое значение, что и repr(). Множество значений, такие как числа или структуры как списки и словари, имеют одинаковое представление, используя любую функцию. Строки, в частности, имеют два отдельных представления. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Несколько примеров: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> s </span><span style=" font-family:'monospace'; color:#66cc66;">=</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#483d8b;">'Hello, world.'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#008000;">str</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace';">s</span><span style=" font-family:'monospace'; color:#000000;">)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#483d8b;">'Hello, world.'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#dc143c;">repr</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace';">s</span><span style=" font-family:'monospace'; color:#000000;">)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#483d8b;">&quot;'Hello, world.'&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#008000;">str</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace'; color:#ff4500;">1</span><span style=" font-family:'monospace';">/</span><span style=" font-family:'monospace'; color:#ff4500;">7</span><span style=" font-family:'monospace'; color:#000000;">)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#483d8b;">'0.14285714285714285'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> x </span><span style=" font-family:'monospace'; color:#66cc66;">=</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">10</span><span style=" font-family:'monospace';"> * </span><span style=" font-family:'monospace'; color:#ff4500;">3.25</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> y </span><span style=" font-family:'monospace'; color:#66cc66;">=</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">200</span><span style=" font-family:'monospace';"> * </span><span style=" font-family:'monospace'; color:#ff4500;">200</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> s </span><span style=" font-family:'monospace'; color:#66cc66;">=</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#483d8b;">'The value of x is '</span><span style=" font-family:'monospace';"> + </span><span style=" font-family:'monospace'; color:#dc143c;">repr</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace';">x</span><span style=" font-family:'monospace'; color:#000000;">)</span><span style=" font-family:'monospace';"> + </span><span style=" font-family:'monospace'; color:#483d8b;">', and y is '</span><span style=" font-family:'monospace';"> + </span><span style=" font-family:'monospace'; color:#dc143c;">repr</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace';">y</span><span style=" font-family:'monospace'; color:#000000;">)</span><span style=" font-family:'monospace';"> + </span><span style=" font-family:'monospace'; color:#483d8b;">'...'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">print</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace';">s</span><span style=" font-family:'monospace'; color:#000000;">)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">The value of x </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">is</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">32.5</span><span style=" font-family:'monospace'; color:#66cc66;">,</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">and</span><span style=" font-family:'monospace';"> y </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">is</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">40000</span><span style=" font-family:'monospace';">...</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; font-style:italic; color:#808080;"># repr() строки добавляет строковые кавычки и бэкслэши:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">... </span><span style=" font-family:'monospace'; color:#000000;">hello</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#66cc66;">=</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#483d8b;">'hello, world</span><span style=" font-family:'monospace'; font-weight:600; color:#000099;">\n</span><span style=" font-family:'monospace'; color:#483d8b;">'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> hellos </span><span style=" font-family:'monospace'; color:#66cc66;">=</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#dc143c;">repr</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace';">hello</span><span style=" font-family:'monospace'; color:#000000;">)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">print</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace';">hellos</span><span style=" font-family:'monospace'; color:#000000;">)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#483d8b;">'hello, world</span><span style=" font-family:'monospace'; font-weight:600; color:#000099;">\n</span><span style=" font-family:'monospace'; color:#483d8b;">'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; font-style:italic; color:#808080;"># Аргумент для repr() может быть любым объектом Python:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">... </span><span style=" font-family:'monospace'; color:#dc143c;">repr</span><span style=" font-family:'monospace'; color:#000000;">((</span><span style=" font-family:'monospace';">x</span><span style=" font-family:'monospace'; color:#66cc66;">,</span><span style=" font-family:'monospace';"> y</span><span style=" font-family:'monospace'; color:#66cc66;">,</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace'; color:#483d8b;">'spam'</span><span style=" font-family:'monospace'; color:#66cc66;">,</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#483d8b;">'eggs'</span><span style=" font-family:'monospace'; color:#000000;">)))</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#483d8b;">&quot;(32.5, 40000, ('spam', 'eggs'))&quot;</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вот два способа вывести таблицу квадратов и кубов: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">for</span><span style=" font-family:'monospace';"> x </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">in</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#008000;">range</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace'; color:#ff4500;">1</span><span style=" font-family:'monospace'; color:#66cc66;">,</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">11</span><span style=" font-family:'monospace'; color:#000000;">)</span><span style=" font-family:'monospace';">:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">...     </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">print</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace'; color:#dc143c;">repr</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace';">x</span><span style=" font-family:'monospace'; color:#000000;">)</span><span style=" font-family:'monospace';">.</span><span style=" font-family:'monospace'; color:#000000;">rjust(</span><span style=" font-family:'monospace'; color:#ff4500;">2</span><span style=" font-family:'monospace'; color:#000000;">)</span><span style=" font-family:'monospace'; color:#66cc66;">,</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#dc143c;">repr</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace';">x*x</span><span style=" font-family:'monospace'; color:#000000;">)</span><span style=" font-family:'monospace';">.</span><span style=" font-family:'monospace'; color:#000000;">rjust(</span><span style=" font-family:'monospace'; color:#ff4500;">3</span><span style=" font-family:'monospace'; color:#000000;">)</span><span style=" font-family:'monospace'; color:#66cc66;">,</span><span style=" font-family:'monospace';"> end</span><span style=" font-family:'monospace'; color:#66cc66;">=</span><span style=" font-family:'monospace'; color:#483d8b;">' '</span><span style=" font-family:'monospace'; color:#000000;">)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">...     </span><span style=" font-family:'monospace'; font-style:italic; color:#808080;"># Обратите внимание на использование 'end' в предыдущей строке</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">...     </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">print</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace'; color:#dc143c;">repr</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace';">x*x*x</span><span style=" font-family:'monospace'; color:#000000;">)</span><span style=" font-family:'monospace';">.</span><span style=" font-family:'monospace'; color:#000000;">rjust(</span><span style=" font-family:'monospace'; color:#ff4500;">4</span><span style=" font-family:'monospace'; color:#000000;">))</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">...</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">1</span><span style=" font-family:'monospace';">   </span><span style=" font-family:'monospace'; color:#ff4500;">1</span><span style=" font-family:'monospace';">    </span><span style=" font-family:'monospace'; color:#ff4500;">1</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">2</span><span style=" font-family:'monospace';">   </span><span style=" font-family:'monospace'; color:#ff4500;">4</span><span style=" font-family:'monospace';">    </span><span style=" font-family:'monospace'; color:#ff4500;">8</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">3</span><span style=" font-family:'monospace';">   </span><span style=" font-family:'monospace'; color:#ff4500;">9</span><span style=" font-family:'monospace';">   </span><span style=" font-family:'monospace'; color:#ff4500;">27</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">4</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">16</span><span style=" font-family:'monospace';">   </span><span style=" font-family:'monospace'; color:#ff4500;">64</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">5</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">25</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">125</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">6</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">36</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">216</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">7</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">49</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">343</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">8</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">64</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">512</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">9</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">81</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">729</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#ff4500;">10</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">100</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">1000</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#66cc66;">&gt;&gt;&gt;</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">for</span><span style=" font-family:'monospace';"> x </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">in</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#008000;">range</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace'; color:#ff4500;">1</span><span style=" font-family:'monospace'; color:#66cc66;">,</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">11</span><span style=" font-family:'monospace'; color:#000000;">)</span><span style=" font-family:'monospace';">:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">...     </span><span style=" font-family:'monospace'; font-weight:600; color:#ff7700;">print</span><span style=" font-family:'monospace'; color:#000000;">(</span><span style=" font-family:'monospace'; color:#483d8b;">'{0:2d} {1:3d} {2:4d}'</span><span style=" font-family:'monospace';">.</span><span style=" font-family:'monospace'; color:#000000;">format(</span><span style=" font-family:'monospace';">x</span><span style=" font-family:'monospace'; color:#66cc66;">,</span><span style=" font-family:'monospace';"> x*x</span><span style=" font-family:'monospace'; color:#66cc66;">,</span><span style=" font-family:'monospace';"> x*x*x</span><span style=" font-family:'monospace'; color:#000000;">))</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">...</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">1</span><span style=" font-family:'monospace';">   </span><span style=" font-family:'monospace'; color:#ff4500;">1</span><span style=" font-family:'monospace';">    </span><span style=" font-family:'monospace'; color:#ff4500;">1</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">2</span><span style=" font-family:'monospace';">   </span><span style=" font-family:'monospace'; color:#ff4500;">4</span><span style=" font-family:'monospace';">    </span><span style=" font-family:'monospace'; color:#ff4500;">8</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">3</span><span style=" font-family:'monospace';">   </span><span style=" font-family:'monospace'; color:#ff4500;">9</span><span style=" font-family:'monospace';">   </span><span style=" font-family:'monospace'; color:#ff4500;">27</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">4</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">16</span><span style=" font-family:'monospace';">   </span><span style=" font-family:'monospace'; color:#ff4500;">64</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">5</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">25</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">125</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">6</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">36</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">216</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">7</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">49</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">343</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">8</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">64</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">512</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">9</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">81</span><span style=" font-family:'monospace';">  </span><span style=" font-family:'monospace'; color:#ff4500;">729</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; color:#ff4500;">10</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">100</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; color:#ff4500;">1000</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">(Заметьте, что в первом примере один пробел между каждым столбцом был добавлен с помощью <a href="http://pythoner.name/documentation/library/functions#print"><span style=" text-decoration: underline; color:#0000ff;">print()</span></a>: он всегда добавляет пробелы между своими аргументами.) </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Этот пример демонстрирует метод строковых объектов <a href="http://pythoner.name/documentation/library/stdtypes#str.rjust"><span style=" text-decoration: underline; color:#0000ff;">str.rjust()</span></a>, который выравнивает строку по правому краю в поле заданной ширины, заполняя ее пробелами слева. Есть схожие методы <a href="http://pythoner.name/documentation/library/stdtypes#str.ljust"><span style=" text-decoration: underline; color:#0000ff;">str.ljust()</span></a> и <a href="http://pythoner.name/documentation/library/stdtypes#str.center"><span style=" text-decoration: underline; color:#0000ff;">str.center()</span></a>. Они ничего не выводят, а просто возвращают новую строку. Если вводимая строка слишком длинная, они не урезают ее, а возвращают без изменений; это приведет в беспорядок вашу планировку столбцов, но это обычно лучше, чем альтернатива, которая выдала бы ложное значение. (Если вы действительно хотите усечь, вы всегда можете добавить оператор среза, как в <span style=" font-family:'Courier New,courier';">x.ljust(n)[:n]</span>.) </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Существует другой метод, <a href="http://pythoner.name/documentation/library/stdtypes#str.zfill"><span style=" text-decoration: underline; color:#0000ff;">str.zfill()</span></a>, который заполняет нулями слева числовую строку. Он понимает знаки плюс и минус: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; '12'.zfill(5)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'00012'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; '-3.14'.zfill(7)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'-003.14'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; '3.14159265359'.zfill(5)</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'3.14159265359'</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Основное использование метода <a href="http://pythoner.name/documentation/library/stdtypes#str.format"><span style=" text-decoration: underline; color:#0000ff;">str.format()</span></a> выглядит вот так: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; print('We are the {} who say &quot;{}!&quot;'.format('knights', 'Ni'))</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">We are the knights who say &quot;Ni!</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Скобки и символы внутри них (называемые полями форматирования) заменяются объектами, переданными методу str.format(). Число в скобках может быть использовано как ссылка на позицию объекта, переданного методу str.format(). </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; print('{0} and {1}'.format('spam', 'eggs'))</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">spam and eggs</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; print('{1} and {0}'.format('spam', 'eggs'))</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">eggs and spam</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если в методе используются аргументы-ключевые слова, их значения определяются путем использования имени аргумента. </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; print('This {food} is {adjective}.'.format(</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">...       food='spam', adjective='absolutely horrible'))</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">This spam is absolutely horrible.</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Позиционные и keyword (ключевые слова - прим. пер.) аргументы могут быть произвольно скомбинированы: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; print('The story of {0}, {1}, and {other}.'.format('Bill', 'Manfred',</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">                                                       other='Georg'))</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">The story of Bill, Manfred, and Georg.</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'!a'</span> (применяет <a href="http://pythoner.name/documentation/library/functions#ascii"><span style=" text-decoration: underline; color:#0000ff;">ascii()</span></a>), <span style=" font-family:'Courier New,courier';">'!s'</span> (применяет <a href="http://pythoner.name/documentation/library/stdtypes#str"><span style=" text-decoration: underline; color:#0000ff;">str()</span></a>) и <span style=" font-family:'Courier New,courier';">'!r'</span> (применяет <a href="http://pythoner.name/documentation/library/functions#repr"><span style=" text-decoration: underline; color:#0000ff;">repr()</span></a> ) могут быть использованы для конвертирования значение перед тем, как оно будет отформатировано: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; contents = 'eels'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; print('My hovercraft is full of {}.'.format(contents))</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">My hovercraft is full of eels.</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; print('My hovercraft is full of {!r}.'.format(contents))</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">My hovercraft is full of 'eels'.</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Необязательное <span style=" font-family:'Courier New,courier';">':'</span> и спецификатор формата могут следовать за именем поля. Это позволяет получить больший контроль над форматированием значения. Следующий пример округляет Pi до трех знаков после точки. </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; import math</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; print('The value of PI is approximately {0:.3f}.'.format(math.pi))</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">The value of PI is approximately 3.142.</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Передача целого числа после <span style=" font-family:'Courier New,courier';">':'</span> создаст поле, минимальная ширина которого будет соответствовать этому числу. Это полезно для создания таблицы. </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; table = {'Sjoerd': 4127, 'Jack': 4098, 'Dcab': 7678}</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; for name, phone in table.items():</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">...     print('{0:10} ==&gt; {1:10d}'.format(name, phone))</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">...</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Jack       ==&gt;       4098</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Dcab       ==&gt;       7678</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Sjoerd     ==&gt;       4127</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если у вас действительно длинная строка, которую вы не хотите разделять, будет замечательно, если вы упомяните переменные, которые форматируются по имени, вместо позиций. Это может быть сделано простой передачей словаря и использованием квадратных скобок <span style=" font-family:'Courier New,courier';">'[]'</span> для доступа к ключам </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; table = {'Sjoerd': 4127, 'Jack': 4098, 'Dcab': 8637678}</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; print('Jack: {0[Jack]:d}; Sjoerd: {0[Sjoerd]:d}; '</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">...       'Dcab: {0[Dcab]:d}'.format(table))</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Jack: 4098; Sjoerd: 4127; Dcab: 8637678</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Это может быть также сделано передачей таблицы в качестве аргумента-ключевого слова с использованием нотации '**'. </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; table = {'Sjoerd': 4127, 'Jack': 4098, 'Dcab': 8637678}</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; print('Jack: {Jack:d}; Sjoerd: {Sjoerd:d}; Dcab: {Dcab:d}'.format(**table))</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Jack: 4098; Sjoerd: 4127; Dcab: 8637678</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Это особенно полезно в сочетании с функцией <a href="http://pythoner.name/documentation/library/functions#vars"><span style=" text-decoration: underline; color:#0000ff;">vars()</span></a>, которая возвращает словарь, включающий все локальные переменные. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для полного обзора строкового форматирования с помощью str.format() см. Format String Syntax (docs.python.org/3/library/string.html#formatstrings). </p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="old-string-formatting"></a><span style=" font-size:large; font-weight:600;">7</span><span style=" font-size:large; font-weight:600;">.1.1. Старое форматирование строк</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Оператор <span style=" font-family:'Courier New,courier';">%</span> также может быть использован для форматирования строки. Он интерпретирует левый аргумент так же, как <span style=" font-family:'Courier New,courier';">sprintf()</span>-стиль формата строки, будучи примененным к правому аргументу, и возвращает строку результата из этой форматирующей операции. Например: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; import math</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; print('The value of PI is approximately %5.3f.' % math.pi)</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">The value of PI is approximately 3.142.</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Больше информации может быть найдено в разделе <a href="http://pythoner.name/documentation/library/stdtypes#old-string-formatting"><span style=" text-decoration: underline; color:#0000ff;">printf-стиль форматирования строк</span></a>. </p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="reading-and-writing-files"></a><span style=" font-size:x-large; font-weight:600;">7</span><span style=" font-size:x-large; font-weight:600;">.2. Чтение и запись файлов</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://pythoner.name/documentation/library/functions#open"><span style=" text-decoration: underline; color:#0000ff;">open()</span></a> возвращает файловый объект (docs.python.org/3/glossary.html#term-file-object) и чаще всего используется с двумя аргументами: <span style=" font-family:'Courier New,courier';">open(filename, mode)</span>. </p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f = open('workfile', 'w')</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Первый аргумент является строкой, содержащей имя файла. Второй аргумент - другая строка, содержащая несколько символов, описывающих способ, которым файл будет открыт. <span style=" font-style:italic;">mode</span> (режим - прим. пер.) может быть <span style=" font-family:'Courier New,courier';">'r'</span>, когда файл будет только читаться, <span style=" font-family:'Courier New,courier';">'w'</span> - только для записи (существующий файл с таким же именем будет стерт), и <span style=" font-family:'Courier New,courier';">'a'</span> открывает файл для добавления; любые данные, записанные в файл, автоматически добавляются в конец. <span style=" font-family:'Courier New,courier';">'r+'</span> открывает файл как для чтения, так и записи. Аргумент <span style=" font-style:italic;">mode</span> опциональный; если он пропущен, будет назначен <span style=" font-family:'Courier New,courier';">'r'</span>. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> Обычно файл открывается в текстовом режиме, это означает, что вы считываете из файла и записываете в файл строки. Файл кодируется в определенной кодировке. Если кодировка не указана, то по умолчанию она зависит от платформы (см. <a href="http://pythoner.name/documentation/library/functions#open"><span style=" text-decoration: underline; color:#0000ff;">open()</span></a>). Добавление <span style=" font-family:'Courier New,courier';">'b'</span> к режиму откроет файл в режиме <span style=" font-style:italic;">binary</span> (бинарном - прим. пер.): теперь данные читаются и записываются из байтовых объектов. Этот режим следует использовать для всех файлов, которые не содержат текст. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В текстовом режиме, по-умолчанию при чтении происходит преобразование окончания строки, которое зависит от платформы (<span style=" font-family:'Courier New,courier';">\n</span> в Unix, <span style=" font-family:'Courier New,courier';">\r\n</span> в Windows) в просто <span style=" font-family:'Courier New,courier';">\n</span>. При записи в текстовом режиме происходит обратная конвертация. Это происходящее за сценой преобразование файловых данные прекрасно для текстовых файлов, но будет портить бинарные данные как те, что в файлах JPEG или EXE. Будьте очень осторожны, используя бинарный режим, когда читаете и пишите такие файлы. </p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="methods-of-file-objects"></a><span style=" font-size:large; font-weight:600;">7</span><span style=" font-size:large; font-weight:600;">.2.1. Методы файловых объектов</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Остальные примеры в этом разделе будут предполагать, что файловый объект под названием <span style=" font-family:'Courier New,courier';">f</span> уже был создан. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Считывая содержимое файла, вызовите <span style=" font-family:'Courier New,courier';">f.read(size)</span>, который читает некоторое количество данных и возвращает их как строку (в текстовом режиме) или объект байтов (в бинарном режиме). <span style=" font-style:italic;">size</span> - необязательный числовой аргумент. Когда size пропущен или отрицателен, все содержимое файла будет прочитано и возвращено; это ваша проблема, если файл окажется вдвое больше, чем память компьютера. По-другому, наибольший размер байтов читается и возвращается. Если был достигнут конец файла, <span style=" font-family:'Courier New,courier';">f.read()</span> вернет пустую строку. </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.read()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'This is the entire file.\n'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.read()</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">''</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">f.readline()</span> читает одну строку (линию) из файла; символ новой строки (<span style=" font-family:'Courier New,courier';">\n</span>) остается в конце строки, и опускается только на последней строке файла, если файл не заканчивается новой строкой. Это делает возврат значения недвусмысленным; если f.readline() возвращает пустую строку, значит был достигнут конец файла, в то время как пустая линия представлена <span style=" font-family:'Courier New,courier';">'\n'</span>, строкой, содержащей только одиночный символ новой линии. </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.readline()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'This is the first line of the file.\n'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.readline()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'Second line of the file\n'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.readline()</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">''</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для чтения строк из файла, вы можете использовать цикл для обхода файлового объекта. Это эффективно для памяти, быстро и управляется простым кодом: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; for line in f:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">...     print(line, end='')</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">...</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">This is the first line of the file.</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Second line of the file</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если вы хотите считать все строки файла в список, вы можете также использовать <span style=" font-family:'Courier New,courier';">list(f)</span> или <span style=" font-family:'Courier New,courier';">f.readlines()</span>. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">f.write(string)</span> записывает содержимое <span style=" font-style:italic;">string</span> в файл, возвращает количество записанных символов. </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.write('This is a test\n')</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">15</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Другие типы объектов нуждаются в конвертации - или в строку (в текстовом режиме) или объект байтов (в бинарном режиме) - перед своей записью: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; value = ('the answer', 42)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; s = str(value)  # конвертирование кортежа в строку</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.write(s)</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">18</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При двоичном режиме <span style=" font-family:'Courier New,courier';">f.tell()</span> возвращает целое число, указывающее для файлового объекта текущую позицию в файле, представленное как количество байтов от начала файла, и непрозрачный номер в текстовом режиме. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы изменить позицию в файловом объекте, используйте <span style=" font-family:'Courier New,courier';">f.seek(offset, from_what)</span>. Позиция вычисляется из добавления offset (смещение - прим. пер.) к упомянутой точке; эта точка определяется аргументом from_what. Значение 0 from_what  указывает на начало файла, 1 использует текущую позицию файла и 2 - конец файла как упомянутая точка. from_what может быть опущен, что приравнивает его к 0, использованию начала файла, как отправной точки. </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f = open('workfile', 'rb+')</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.write(b'0123456789abcdef')</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">16</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.seek(5)      # Идем к 6-му байту в файле</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">5</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.read(1)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">b'5'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.seek(-3, 2)  # Идем к третьему байту с конца</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">13</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.read(1)</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">b'd'</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В текстовых фалах (тех, что были открыты без <span style=" font-family:'Courier New,courier';">'b'</span>) seek разрешен только относительно начала файла (исключение - ищет самый конец файла с помощью <span style=" font-family:'Courier New,courier';">seek(0, 2)</span>), и единственными допустимыми значениями смещения являются те, которые возвращаются из <span style=" font-family:'Courier New,courier';">f.tell()</span>, или ноль. Любое другое значение смещения вызывает неопределенное поведение. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Когда вы закончите с файлом, вызовите <span style=" font-family:'Courier New,courier';">f.close()</span>, чтобы закрыть его и освободить какие-либо системные ресурсы, занятые открытым файлом. После вызова <span style=" font-family:'Courier New,courier';">f.close()</span>, попытки использовать файловый объект будут приводить к автоматическому сбою. </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.close()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.read()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Traceback (most recent call last):</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ValueError: I/O operation on closed file</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Хорошая практика - использовать ключевое слово with (docs.python.org/3/reference/compound_stmts.html#with), когда имеете дело с объектами-файлами. У этого есть преимущество, что файл правильно закроется после завершения его набора, даже если по пути возникнет исключение. Это также намного короче, чем писать эквивалентный try(docs.python.org/3/reference/compound_stmts.html#try)-finally(docs.python.org/3/reference/compound_stmts.html#finally) блок: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; with open('workfile', 'r') as f:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">...     read_data = f.read()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; f.closed</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">True</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Файловые объекты имеют несколько дополнительных методов, таких как <span style=" font-family:'Courier New,courier';">isstty()</span> и <span style=" font-family:'Courier New,courier';">trancate()</span>, которые используются менее часто; обратитесь к справке по библиотеке для полного экскурса по объектам-файлам. </p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="saving-structured-data-with-json"></a><span style=" font-size:large; font-weight:600;">7</span><span style=" font-size:large; font-weight:600;">.2.2. Сохранение структурированных данных с помощью json</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Строки могут быть легко записаны в и считаны из файла. Числа отнимают немного больше усилий, поскольку метод <span style=" font-family:'Courier New,courier';">read()</span> возвращает только строку, которая будет передана функции наподобие int() (docs.python.org/3/library/functions.html#int), которая примет строку как '123' и вернет ее числовое значение 123. Когда вы хотите сохранить более сложные типы данных как вложенные списки и словари, ручной разбор и сериализация становятся сложными. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вместо того, чтобы постоянно писать и отлаживать код для сохранения сложных типов данных в файлах, Python позволяет использовать популярный формат обмена данными под названием JSON (JavaScript Object Notation) (json.org/). Стандартный модуль под названием json (docs.python.org/3/library/json.html#module-json) может принимать иерархии данных Python и конвертировать их в строковое представление; этот процесс называется <span style=" font-style:italic;">serializing</span> (сериализация, упорядочивание, издание выпусками - прим. пер.). Реконструкция данных из строкового представления называется <span style=" font-style:italic;">deserializing</span>. Между сериализацией и десереализацией строковое представление объекта может быть сохранено в файле или данных, или отправлено по сетевому соединению удаленному компьютеру. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Обратите внимание: Формат JSON обычно используется современными приложениями для позволения обмена данными. Много программистов уже хорошо знакомы с ним, что хорошо для совместимости. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если у вас есть объект <span style=" font-family:'Courier New,courier';">x</span>, вы можете взглянуть на его JSON представление в виде строки с помощью одной строки кода: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;&gt;&gt; json.dumps([1, 'simple', 'list'])</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'[1, &quot;simple&quot;, &quot;list&quot;]'</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Другой вариант функции dumps() (docs.python.org/3/library/json.html#json.dumps), называемый dump() (docs.python.org/3/library/json.html#json.dump), просто сериализует объект в текстовый файл (docs.python.org/3/glossary.html#term-text-file). Так если <span style=" font-family:'Courier New,courier';">f</span> - текстовый файловый объект, открытый на запись, мы можем сделать это: </p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">json.dump(x, f)</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для декодирования объекта опять если <span style=" font-family:'Courier New,courier';">f</span> - текстовый файл, который был открыт для чтения: </p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">x = json.load(f)</span> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Это простая техника сериализации может обрабатывать списки и словари, но сериализация объектов произвольных классов в JSON требует немного больше дополнительных усилий. Обратитесь к справке по модулю json, содержащей объяснение этого. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">См. также: pickle (docs.python.org/3/library/pickle.html#module-pickle) - модуль pickle </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В противоположность JSON, pickle - протокол, который позволяет сериализацию произвольных объектов Python. Как таковой он специфичен для Python и не может использоваться для взаимодействия с приложениями, написанными на других языках. Он также небезопасен по-умолчанию: десериализация данных pickle, приходящих из ненадежных источников, может выполнить произвольный код, если данные были созданы опытным злоумышленником.</p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:large; font-weight:600;">Создано</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">2017-03-05 </p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:large; font-weight:600;">Обновлено</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">2017-06-02 </p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://pythoner.name/index.php/comment/reply/node/41/comment#comment-form"><span style=" text-decoration: underline; color:#0000ff;">Добавить комментарий</span></a> </li></ul>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="book-label-26"></a><span style=" font-size:x-large; font-weight:600;">П</span><span style=" font-size:x-large; font-weight:600;">ерекрёстные ссылки книги для 7. Ввод и вывод</span> </p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style="" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://pythoner.name/index.php/documentation/tutorial/modules"><span style=" text-decoration: underline; color:#0000ff;">6. Модули</span></a> </li>
<li style="" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://pythoner.name/index.php/documentation/tutorial"><span style=" text-decoration: underline; color:#0000ff;">Вверх</span></a> </li>
<li style="" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://pythoner.name/index.php/documentation/tutorial/exceptions"><span style=" text-decoration: underline; color:#0000ff;">8. Ошибки и исключения</span></a> </li></ul></body></html>