<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="container"></a><a href="https://python-scripts.com/import-collections"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">p</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">ython-scripts.com</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="reader-title"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">М</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">одуль collections на примерах </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="reader-credits"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">а</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">втор </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="meta-data"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">2</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">2-32 минуты </span></p>
<hr />
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="moz-reader-content"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">М</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">одуль </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">collections</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> содержит специализированный контейнер типов данных, который может быть использован для замены контейнеров общего назначения Python (</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">dict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">tuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">list</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, и </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">set</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">). Мы изучим следующие части этого замечательного модуля:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'MS Shell Dlg 2'; font-size:10pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">ChainMap</li>
<li style=" font-family:'MS Shell Dlg 2'; font-size:10pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">defaultdict</li>
<li style=" font-family:'MS Shell Dlg 2'; font-size:10pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">deque</li>
<li style=" font-family:'MS Shell Dlg 2'; font-size:10pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">namedtuple</li>
<li style=" font-family:'MS Shell Dlg 2'; font-size:10pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">OrderedDict</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Также существует наследованный модуль коллекций под названием </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">abc</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, или </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">Abstract Base Classes</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Мы рассмотрим его в другой раз. Давайте начнем с контейнера </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMap</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">!</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMap</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMap</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> – это класс, который дает возможность объединить несколько сопоставлений вместе таким образом, чтобы они стали единым целым. Если вы обратитесь к документации, то увидите, что данный класс принимает </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">**maps*</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Это значит, что </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMap</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> будет принимать любое количество сопоставлений или </span><a href="https://python-scripts.com/lists-tuples-dictionaries"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">словарей</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> и превращать их в единое обновляемое представление. Давайте взглянем на пример, чтобы вы могли увидеть, как это работает: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">from collections import ChainMap</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">car_parts = {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    'hood': 500,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    'engine': 5000,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    'front_door': 750</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">car_options = {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    'A/C': 1000,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    'Turbo': 2500,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    'rollbar': 300</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">car_accessories = {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    'cover': 100,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    'hood_ornament': 150,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    'seat_cover': 99</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">car_pricing = ChainMap(car_accessories, car_options, car_parts)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">print(car_pricing['hood']) # 500</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Здесь мы импортировали </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMap</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> из </span><a href="https://python-scripts.com/import-collections"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">модуля collections</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Затем мы создали три </span><a href="https://python-scripts.com/lists-tuples-dictionaries"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">словаря Python</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Далее, мы создали экземпляр ChainMap, передав эти три словаря. В конце мы попытались получить доступ к одному из ключей в нашем </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMap</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. После этого, ChainMap пройдет через каждое сопоставление, чтобы увидеть, существует ли данный ключ и имеет ли он значение. Если это так, тогда </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMap</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> вернет первое найденное значение, которое соответствует ключу. Это весьма полезно в тех случаях, когда вам нужно установить настройки по умолчанию.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Давайте представим, что нам нужно создать приложение, которое имеет определенные настройки по умолчанию. Приложение также будет знать о переменных среды операционной системы. Если существует переменная среды, которая соответствует значению ключа, который расположен в нашем приложении по умолчанию, тогда среда переопределит наши настройки по умолчанию. Теперь давайте представим, что мы можем передавать аргументы нашему приложению. Эти аргументы имеют преимущество над средой и настройками по умолчанию. Это тот случай, когда </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMap</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> представлен во всей красе. Давайте взглянем на пример, который основан на </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">документации Python</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">import argparse</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">import os</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">from collections import ChainMap</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">def main():</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    app_defaults = {'username':'admin', 'password':'admin'}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    parser = argparse.ArgumentParser()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    parser.add_argument('-u', '--username')</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    parser.add_argument('-p', '--password')</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    args = parser.parse_args()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    command_line_arguments = {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">        key:value for key, value in vars(args).items() if value</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    chain = ChainMap(</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">                command_line_arguments,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">                os.environ,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">                app_defaults</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">            )</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    print(chain['username'])</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">if __name__ == '__main__':</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    main()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    os.environ['username'] = 'test'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; color:#0000ff;">    main()</span></p></td>
<td></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Давайте немного притормозим. Здесь мы </span><a href="https://python-scripts.com/import-modules-python"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">импортировали модуль Python</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">argparse</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> совместно с </span><a href="https://python-scripts.com/import-os-example"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">модулем os</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Мы также импортировали </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMap.Next</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, простую функцию со слегка нелепыми настройками. Я видел, что эти настройки используются в некоторых популярных роутерах. Далее, мы устанавливаем наш парсер аргументов, и указываем ему, как именно он будет обрабатывать определенные </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">параметры командной строки</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Обратите внимание на то, что </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">argparse</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> не предоставляет способ получения объектов словаря или его аргументов, так что мы используем </span><a href="https://python-scripts.com/lists-tuples-dictionaries"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">dict</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> для извлечения того, что нам нужно. Здесь мы задействуем встроенный инструмент </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">Python vars</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Если вы вызовете его без аргументов, то vars будет вести себя как встроенный </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">locals</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Но если передать его объекту, то vars будет выступать в роли эквивалента свойству объекта </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">__dict__</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Другими словами, </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">vars(args)</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> равен </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">args.__dict__</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. В конце мы создаем наш </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMap</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, передав аргументы нашей командной строке (если таковые имеются), затем переменные среды и, наконец, настройки. В конце кода, мы пытаемся вызвать нашу функцию, затем устанавливаем переменные среды и снова делаем вызов. Запустите его и увидите, что в выдаче будет admin, и, как и ожидалось, test. Теперь попробуем вызвать скрипт с аргументом командной строки: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b045606530893"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ython chain_map.py -u mike</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">После запуска кода, я получил mike дважды. Это связанно с тем, что аргумент нашей командной строки переопределяет все остальное. Не важно, что мы установили среду, так как наш </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMap</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> смотрит на аргументы командной строки в первую очередь, затем на все остальное. Теперь вы знаете, как использовать </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ChainMaps</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, так что мы можем перейти к Counter!</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">Counter</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://python-scripts.com/import-collections"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">Модуль collections</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> также предоставляет нам небольшой аккуратный инструмент, который поддерживает быстрый и удобный в пользовании калькулятор. Этот инструмент называется </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">Counter</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Вы можете запустить его против большинства итерируемых. Давайте попробуем взглянуть на него в строке. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b04d945428717"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rom collections import Counter</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b04d945428717-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">a</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> = Counter('superfluous')</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b04d945428717-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> Counter({'u': 3, 's': 2, 'e': 1, 'l': 1, 'f': 1, 'o': 1, 'r': 1, 'p': 1})</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b04d945428717-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(a)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b04d945428717-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">c</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ounter = Counter('superfluous')</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b04d945428717-9"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(counter['u']) # 3</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">В данном примере мы </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">импортировали Counter</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> из </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">модуля collections</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> и передали его строке. Это возвращает нам объект Counter, который является наследуемым классом </span><a href="https://python-scripts.com/lists-tuples-dictionaries"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">словаря Python</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Когда мы запускаем эту же команду, но назначаем её счетчик переменной, чтобы </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">доступ к словарю</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> был несколько проще. В данном случае, мы видим, что буква “u” встречается три раза в нашем примере. </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">Класс Counter</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> предоставляет несколько методов, которые могут вас заинтересовать. Например, вы можете вызывать элементы, которые будут выполнять итерацию над элементами, расположенными в словаре, но в произвольном порядке. Вы можете подумать, что эта функция является своего рода скремблером, так как выдача в этом случае представлена как скремблированная версия строки. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b055420477822"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(list(counter.elements()))</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b055420477822-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> ['e', 'l', 'f', 'o', 'r', 's', 's', 'p', 'u', 'u', 'u']</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Еще один полезный метод это </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">most_common</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Вы можете спросить Counter о том, какие объекты являются </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">наиболее распространенными</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, передав число, отображающее наиболее часто повторяющие объекты “n”: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b05d488106518"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(counter.most_common(2))</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b05d488106518-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> [('u', 3), ('s', 2)]</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Здесь мы попросили наш Counter выяснить, какие два объекта являются наиболее повторяемыми. Как вы видите, мы получили </span><a href="https://python-scripts.com/lists-tuples-dictionaries"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">список кортежей</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, в котором указано, что “</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">u</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">” встречается 3 раза, а “</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">s</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">” – два раза. Еще один метод, который я хотел бы рассмотреть, это метод subtract. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">Метод subtract</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> принимает итерируемые или отражения и использует этот аргумент для вычета. Это немного проще понять, если взглянуть на код: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b065278083990"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rom collections import Counter</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b065278083990-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">c</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ounter_one = Counter('superfluous')</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b065278083990-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> Counter({'u': 3, 's': 2, 'e': 1, 'l': 1, 'f': 1, 'o': 1, 'r': 1, 'p': 1})</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b065278083990-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(counter_one)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b065278083990-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">c</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ounter_two = Counter('super')</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b065278083990-9"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">c</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ounter_one.subtract(counter_two)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b065278083990-11"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(counter_one)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b065278083990-12"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> Counter({'u': 2, 'l': 1, 'f': 1, 'o': 1, 's': 1, 'e': 0, 'r': 0, 'p': 0})</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Здесь мы создали заново наш первый счетчик и вывели его, чтобы узнать, что же в нем находится. Далее мы создали второй объект Counter. Наконец, мы </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">вычли второй счетчик из первого</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Если вы внимательно рассмотрите выдачу в конце, вы увидите, что количество букв для пяти объектов было </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">уменьшено на одну</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Как я заметил в начале раздела, вы можете использовать </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">Counter</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> против любых итерируемых или сопоставлений, так что вам не нужно использовать только строки. Вы можете также передать его </span><a href="https://python-scripts.com/lists-tuples-dictionaries"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">кортежам</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, </span><a href="https://python-scripts.com/lists-tuples-dictionaries"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">словарям</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> и </span><a href="https://python-scripts.com/lists-tuples-dictionaries"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">спискам</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">! Попробуйте на практике, чтобы увидеть, как он работает с разными типами данных:<br />Теперь мы готовы к тому, чтобы перейти к </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">defaultdict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">!</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">defaultdict</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://python-scripts.com/import-collections"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">Модуль collections</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> содержит удобный инструмент под названием </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">defaultdict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Это наследуемый класс </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">Python dict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, который принимает </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">default_factory</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> как первичный аргументы. Тип </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">default_factory</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> — это обычный тип Python, такой как </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">int</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> или </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">list</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, но вы также можете использовать функцию или </span><a href="https://python-scripts.com/lambda"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">лямбду</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Давайте начнем с создания обычного </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">словаря Python</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, который считает, сколько раз было использовано каждое слово в предложении: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b06e613429062"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">s</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">entence = &quot;The red for jumped over the fence and ran to the zoo for food&quot;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b06e613429062-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">w</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ords = sentence.split(' ')</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b06e613429062-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">r</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">eg_dict = {}</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b06e613429062-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">or word in words:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b06e613429062-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   if word in reg_dict:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b06e613429062-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">       reg_dict[word] += 1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b06e613429062-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   else:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b06e613429062-9"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">       reg_dict[word] = 1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b06e613429062-11"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(reg_dict)</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Если вы запустите этот код, вы увидите выдачу, которая соответствует следующему: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">{</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'The': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">and': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">fence': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">food': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">for': 2,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">jumped': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">over': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ran': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927-9"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">red': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927-10"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">the': 2,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927-11"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">to': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b076461090927-12"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">'</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">zoo': 1}</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Давайте попробуем сделать то же самое, но с </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">defaultdict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b07e825328111"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rom collections import defaultdict</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b07e825328111-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">s</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">entence = &quot;The red for jumped over the fence and ran to the zoo for food&quot;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b07e825328111-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">w</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ords = sentence.split(' ')</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b07e825328111-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> = defaultdict(int)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b07e825328111-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">or word in words:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b07e825328111-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   d[word] += 1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b07e825328111-10"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(d)</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Вы обнаружите, что этот код намного проще. Это связано с тем, что </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">defaultdict автоматически назначает ноль как значение любому ключу, который еще не имеет значения</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Мы добавили одно, так что теперь в нем больше смысла, и оно также будет увеличиваться, если слово повторяется в предложении несколько раз в предложении. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">efaultdict(&lt;class 'int'&gt;,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">           {'The': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            'and': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            'fence': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            'food': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            'for': 2,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            'jumped': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            'over': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-9"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            'ran': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-10"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            'red': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-11"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            'the': 2,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-12"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            'to': 1,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b086465014358-13"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            'zoo': 1})</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Давайте попробуем использовать </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">тип списка</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> в качестве нашей фабрики по умолчанию. Сначала мы начнем с </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">обычного словаря</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> так же, как мы делали это раньше: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b08d586438199"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">m</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">y_list = [(1234, 100.23), (345, 10.45), (1234, 75.00),</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b08d586438199-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">          (345, 222.66), (678, 300.25), (1234, 35.67)]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b08d586438199-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">r</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">eg_dict = {}</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b08d586438199-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">or acct_num, value in my_list:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b08d586438199-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   if acct_num in reg_dict:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b08d586438199-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">       reg_dict[acct_num].append(value)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b08d586438199-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   else:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b08d586438199-9"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">       reg_dict[acct_num] = [value]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b08d586438199-11"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(reg_dict)</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Этот пример основан на одном коде, который я написал несколько лет назад. В основном я </span><a href="https://python-scripts.com/work-with-files-python"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">читал файл строка за строкой</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, и мне нужно было получить номер аккаунта и сумму платежа, а также отслеживать их. При этом сделать это таким образом, чтобы я смог подвести итоги каждой учетной записи. Мы опустим часть с суммированием в нашем примере. Если вы запустите этот код, вы получите выдачу, на подобие следующей: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b095718543062"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">{</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">345: [10.45, 222.66], 678: [300.25], 1234: [100.23, 75.0, 35.67]}</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Теперь мы меняем этот код, используя </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">defaultdict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b09d673390178"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rom collections import defaultdict</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b09d673390178-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">m</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">y_list = [(1234, 100.23), (345, 10.45), (1234, 75.00),</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b09d673390178-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">          (345, 222.66), (678, 300.25), (1234, 35.67)]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b09d673390178-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> = defaultdict(list)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b09d673390178-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">or acct_num, value in my_list:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b09d673390178-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   d[acct_num].append(value)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b09d673390178-10"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(d)</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">И снова, этот код разрывает условную </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">логику if/else</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, что упрощает данный код. Давайте рассмотрим выдачу вышеописанного кода: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0a5293717732"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">efaultdict(&lt;class 'list'&gt;,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0a5293717732-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">           {345: [10.45, 222.66],</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0a5293717732-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            678: [300.25],</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0a5293717732-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">            1234: [100.23, 75.0, 35.67]})</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Здесь хранится кое-что интересное. Давайте попробуем использовать еще и </span><a href="https://python-scripts.com/lambda"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">лямбду</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> в качестве </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">default_factory</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ac598389807"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rom collections import defaultdict</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ac598389807-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">a</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">nimal = defaultdict(lambda: &quot;Monkey&quot;)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ac598389807-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">a</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">nimal['Sam'] = 'Tiger'</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ac598389807-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(animal['Nick']) # Monkey</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ac598389807-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(animal)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ac598389807-9"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> defaultdict(&lt;function &lt;lambda&gt; at 0x7f32f26da8c0&gt;, {'Nick': 'Monkey', 'Sam': 'Tiger'})</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Здесь мы создали </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">defaultdict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, который назначает ‘</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-style:italic;">Monkey</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">’ в качестве значения по умолчания любому ключу. Мы установили в ‘</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-style:italic;">Tiger</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">’, далее, следующий ключ мы не устанавливаем вообще. Если выведите второй ключ, вы увидите, что он был назначен как ‘</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-style:italic;">Monkey</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">’. В случае, если вы еще не поняли, практически невозможно вызвать </span><a href="https://python-scripts.com/try-except-finally"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">ошибку KeyError</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, пока </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">default_factory</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> установлен в чем-то, что имеет смысл. В документации отмечают, что если вы устанавливаете </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">default_factory</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> в </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-style:italic;">None</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, то вы получите </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-style:italic;">KeyError</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Давайте посмотрим, как это работает: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0b5267351186"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rom collections import defaultdict</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0b5267351186-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">x</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> = defaultdict(None)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0b5267351186-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(x['Mike'])</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0b5267351186-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">T</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">raceback (most recent call last):</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0b5267351186-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   Python Shell, prompt 41, line 1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0b5267351186-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">K</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">eyError: 'Mike'</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">В этом случае мы просто создали очень кривой </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">defaultdict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Он не может назначать значения по умолчанию нашему ключу, так что вместо этого он выдает </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">KeyError</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Конечно, с тех пор как наследованным классом является </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">dict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, мы можем только установить ключ в какое-нибудь значение, и это сработает. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">deque</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">В соответствии с документацией Python, </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">deque</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> – это обобщение стеков и очередей. Они являются контейнером замен для </span><a href="https://python-scripts.com/lists-tuples-dictionaries"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">списка Python</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Они </span><a href="https://python-scripts.com/synchronization-between-threads"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">защищены от потоков</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> и поддерживают эффективность соединения памяти, а также сноски с обеих сторон </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">deque</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Список оптимизирован под быстрые операции с фиксированной длиной. За всеми подробностями можете обратиться к </span><a href="https://docs.python.org/3/library/collections.html#collections.deque"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">документации Python</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Наш </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">deque</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> поддерживает аргумент </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">maxlen</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, который устанавливает границы для deque. В противном случае deque </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">будет расти</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> до произвольных размеров. Когда </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">ограниченный deque</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> заполнен, любые новые объекты, которые были добавлены, вызовут такое же количество элементов, которые выскочат с другого конца. Вот основное правило: </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">если вам нужно что-то быстро дописать или вытащить, используйте deque</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Если вам нужен быстрый случайный доступ, используйте </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">list</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Давайте уделим пару минут, и посмотрим, как мы можем создавать и использовать deque. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0e1841536361"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rom collections import deque</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0e1841536361-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">i</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">mport string</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0e1841536361-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> = deque(string.ascii_lowercase)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0e1841536361-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">or letter in d:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0e1841536361-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   print(letter)</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Здесь мы импортируем deque из нашего </span><a href="https://python-scripts.com/import-collections"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">модуля collections</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, а также модуль </span><a href="https://python-scripts.com/string"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">string</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Для того, чтобы создать экземпляр deque, нам нужно передать его итерируемой. В данном случае, мы передали его </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">string.ascii_lowercase</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, и получили </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">список всех строчных букв</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> в алфавите. Наконец, мы сделали цикл над deque и вывели каждый объект. Теперь давайте взглянем на несколько методов, которыми обладает deque. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">2</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">3</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">4</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">5</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">6</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">7</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">8</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">9</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">10</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">11</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">12</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">13</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">14</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">15</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">16</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">17 </span></p></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-1"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">.append('bork')</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(d)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> deque(['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">        'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'bork'])</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">.appendleft('test')</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(d)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-10"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> deque(['test', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-11"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">        'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'bork'])</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-13"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">.rotate(1)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-14"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(d)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-16"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> deque(['bork', 'test', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l',</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0ea306850365-17"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">        'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'])</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Давайте устроим небольшой разбор полетов. Сначала мы разместили строку в правом краю deque. Далее разместили другую строку в левом краю </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">deque</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Наконец, мы вызываем </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">rotate</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> в нашем deque и передаем его единице, что заставляет его сместиться один раз в право. Другими словами, это заставляет один объект сместиться с правой части на фронтальную. Вы можете передать ему отрицательное число, чтобы происходило то же самое, но с левой стороны. Давайте закончим этот раздел и взглянем на пример, основанный на </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">документации Python</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0f3682966887"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rom collections import deque</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0f3682966887-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ef get_last(filename, n=5):</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0f3682966887-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   &quot;&quot;&quot;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0f3682966887-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   Возвращаем последние N кол-во строк из файла</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0f3682966887-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   &quot;&quot;&quot;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0f3682966887-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   try:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0f3682966887-9"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">       with open(filename) as f:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0f3682966887-10"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">           return deque(f, n)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0f3682966887-11"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   except OSError:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0f3682966887-12"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">       print(&quot;Файл не открывается: {}&quot;.format(filename))</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0f3682966887-13"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">       raise</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Этот код работает по схожему принципу с программой-хвостом Linux. Здесь мы передаем имя файла нашему скрипту вместе с n </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">количеством строк</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, которые мы хотим вернуть. Наш </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">deque</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> ограничен той или иной цифрой, которую мы указываем как n. Это значит, что как только deque заполнится, когда новые строки прочитаны и добавлены в deque, старые строки выпадают из другого конца и отбрасываются. Я также завернул открываемый в операторе файл в простой </span><a href="https://python-scripts.com/try-except-finally"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">обработчик исключений</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, так как очень легко выполнить передачу по неверному пути. Таким образом, мы поймаем несуществующие файлы, к примеру. Теперь мы готовы идти дальше и приступить к изучению </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">namedtuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">namedtuple</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">В данном разделе мы сфокусируемся на </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">namedtuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, который можно использовать для замены </span><a href="https://python-scripts.com/lists-tuples-dictionaries"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">кортежей Python</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Разумеется, </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">namedtuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> действует не так примитивно, как может показаться на первый взгляд. Я видел некоторых программистов, которые используют его как </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">struct</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Если вы не работали с языком, в котором есть </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">struct</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, тогда нужно объяснить немного подробнее. Когда мы говорим о struct, мы имеем ввиду сложный тип данных, который группирует список переменных под одним именем. Давайте взглянем на пример того, как создается </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">namedtuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, чтобы понять принцип его работы: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0fc469074837"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rom collections import namedtuple</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0fc469074837-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">P</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">arts = namedtuple('Parts', 'id_num desc cost amount')</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0fc469074837-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">a</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">uto_parts = Parts(</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0fc469074837-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   id_num='1234',</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0fc469074837-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   desc='Ford Engine',</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0fc469074837-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   cost=1200.00,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0fc469074837-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   amount=10</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0fc469074837-9"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b0fc469074837-11"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(auto_parts.id_num)</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Здесь мы </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">импортировали namedtuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> из модуля </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">collections</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Далее мы вызываем namedtuple, который вернет новый наследуемый класс </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">кортежа</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, но с названными полями. Так что фактически мы создали новый </span><a href="https://python-scripts.com/python-class"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">класс</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> кортежа. Обратите внимание на то, что у нас имеется странная строка в качестве второго аргумента. Это </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">список свойств</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, который мы хотим создать, разделенный пробелами. Теперь, когда у нас появился чудесный </span><a href="https://python-scripts.com/python-class"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">новый класс</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, давайте создадим его экземпляр! Как вы видите выше, это делается так же, как когда мы создаем объект </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">auto_parts</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Теперь мы можем дать </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">auto_parts</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> доступ к различным предметам, используя точечную нотацию, так как теперь они являются свойствами нашего </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">класса Parts</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Одно из преимуществ использования </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">namedtuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> над обычным кортежем заключается в том, что </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">вам не нужно отслеживать индекс каждого объекта</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, так как каждый объект назван и доступен через свойство класса. Давайте взглянем на разницу на примере кода: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b104544196774"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">a</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">uto_parts = ('1234', 'Ford Engine', 1200.00, 10)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b104544196774-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(auto_parts[2]) # выводим цену: 1200.0</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b104544196774-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">i</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d_num, desc, cost, amount = auto_parts</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b104544196774-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(id_num) # '1234'</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">В данном коде мы создали </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">обычный кортеж</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> и передали доступ к цене на двигатель автомобиля, указав Python необходимый нам индекс. Как альтернативный способ, мы можем также извлечь все что есть из кортежа используя </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">множественное назначение</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Лично я предпочитаю в таких случаях использовать </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">namedtuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, так как это проще для мозга, и вы можете использовать метод </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">dir</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">() для проверки кортежа и нахождения его свойств. Попробуйте сами, и посмотрите, что у вас выйдет. Как-то раз я искал способ </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">конвертировать словарь Python в объект</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> и наткнулся на код, который делает что-то вроде этого: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b10c024277311"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rom collections import namedtuple</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b10c024277311-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">P</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">arts = {</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b10c024277311-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   'id_num':'1234',</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b10c024277311-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   'desc':'Ford Engine',</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b10c024277311-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   'cost':1200.00,</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b10c024277311-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   'amount':10</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b10c024277311-8"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">}</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b10c024277311-10"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">arts = namedtuple('Parts', Parts.keys())(**Parts)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b10c024277311-11"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(parts)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b10c024277311-12"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> Parts(amount=10, cost=1200.0, id_num='1234', desc='Ford Engine')</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Это немного странный код, так что давайте разберем его по кусочкам. В первой строке мы импортируем namedtuple, как и раньше. Далее, мы создаем </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">словарь Parts</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Пока все логично. Теперь переходим к странной части. Здесь мы создаем наш </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">класс namedtuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> и называем его ‘Parts’. Второй аргумент – это список ключей из нашего словаря. Последняя часть этой странной части кода: </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">(Parts)**</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Двойная звездочка означает, что мы вызываем наш класс при помощи ключевых аргументов, в нашем случае это словарь. Мы можем разделить эту строку на две части, для большей гигиеничности: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b114473659498"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">arts = namedtuple('Parts', Parts.keys())</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b114473659498-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(parts)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b114473659498-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> &lt;class '__main__.Parts'&gt;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b114473659498-5"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">a</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">uto_parts = parts(**Parts)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b114473659498-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(auto_parts)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b114473659498-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> Parts(amount=10, cost=1200.0, id_num='1234', desc='Ford Engine')</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Здесь мы делаем то же, что и раньше, за исключением того, что сначала мы </span><a href="https://python-scripts.com/python-class"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">создаем класс</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, затем мы вызываем этот класс при помощи словаря для создания объекта. Еще один момент, который я хотел бы прояснить: </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">namedtuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> также принимает аргументы </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">verbose</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> и </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">rename</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">.</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'MS Shell Dlg 2'; font-size:10pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Аргумент <span style=" font-weight:600;">verbose</span> – это флаг, который выводит определение класса непосредственно перед его построением, если вы укажете его значение как True.</li>
<li style=" font-family:'MS Shell Dlg 2'; font-size:10pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Аргумент <span style=" font-weight:600;">rename</span> весьма полезен в тех случаях, когда вы создаете namedtuple из базы данных, или какой-нибудь другой системы, которую ваша программа не контролирует для автоматического переименования свойств для вас.</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">С этого момента вы должны быть достаточно ознакомлены с </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">namedtuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> для личного пользования, так что теперь мы перейдем к </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">OrderedDict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">OrderedDict</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Модуль </span><a href="https://python-scripts.com/import-collections"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">Python collections</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> имеет еще один замечательный наследуемый класс dict под названием </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">OrderedDict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Как подразумевается в его названии, этот словарь </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">отслеживает порядок ключей после их добавления</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Если вы создадите обычный dict, вы заметите, что данные в нем </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">неупорядоченные</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b11d605248704"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> = {'banana': 3, 'apple':4, 'pear': 1, 'orange': 2}</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b11d605248704-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(d)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b11d605248704-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> {'apple': 4, 'banana': 3, 'orange': 2, 'pear': 1}</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Каждый раз, когда вы выводите этот код, порядок может быть разный. Иногда бывают ситуации, когда вам нужно выполнить </span><a href="https://python-scripts.com/loops-for-while"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">цикл</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> над ключами в вашем словаре в </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">определенном порядке</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Например, в моей практике был случай, когда мне нужно было </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">отсортировать ключи</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, чтобы я мог перебрать их по порядку. Чтобы сделать это, вы можете выполнить следующее: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b125789266811"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> = {'banana': 3, 'apple':4, 'pear': 1, 'orange': 2}</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b125789266811-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">k</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">eys = d.keys()</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b125789266811-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">k</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">eys = sorted(keys)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b125789266811-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">or key in keys:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b125789266811-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   print (key, d[key])</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Результат </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b12d411118494"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">a</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">pple 4</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b12d411118494-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">b</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">anana 3</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b12d411118494-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">o</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">range 2</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b12d411118494-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ear 1</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Давайте создадим экземпляр </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">OrderedDict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, используя оригинал </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">dict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, но на этапе создания мы </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">отсортируем ключи</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> в этом словаре: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b134609703394"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rom collections import OrderedDict</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b134609703394-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">d</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> = {'banana': 3, 'apple':4, 'pear': 1, 'orange': 2}</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b134609703394-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">n</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ew_d = OrderedDict(sorted(d.items()))</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b134609703394-6"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">rint(new_d)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b134609703394-7"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">#</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> OrderedDict([('apple', 4), ('banana', 3), ('orange', 2), ('pear', 1)])</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b134609703394-9"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">or key in new_d:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b134609703394-10"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   print (key, new_d[key])</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Результат </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b13c152030192"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">a</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">pple 4</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b13c152030192-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">b</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">anana 3</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b13c152030192-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">o</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">range 2</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b13c152030192-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ear 1</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Здесь мы создали наш </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">OrderedDict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, сортируя его при помощи встроенной функции </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">Python sorted</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Функция </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">sorted</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> берет объекты словаря, который является списком кортежей, отображающих пары ключей словаря. Данная функция сортирует их, затем передает в </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">OrderedDict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, который сохраняет указанный порядок. Таким образом, когда мы выводим ключи и значения, они будут в том порядке, который мы и ожидаем. Если вы </span><a href="https://python-scripts.com/loops-for-while"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; text-decoration: underline; color:#0000ff;">создадите цикл</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> над обычным словарем (с неотсортированным списком ключей), порядок будет меняться каждый раз. Обратите внимание на то, что если вы </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">добавляете новые ключи</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, они будут расположены в конце OrderedDict, без автоматической сортировки. Также стоит отметить, что когда вы сравниваете два </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">OrderedDicts</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">, они не только будут тестировать объекты на равенство, но также на то, корректен ли указанный порядок. Обычный словарь только смотрит на содержимое словаря, не обращая никакого внимание на порядок этого содержимого. Наконец, OrderedDicts содержит два новых метода в Python 3: </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">popitem</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> и </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">move_to_end</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">.</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'MS Shell Dlg 2'; font-size:10pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Метод <span style=" font-weight:600;">popitem</span> возвращает и удаляет пары (ключей или объектов).</li>
<li style=" font-family:'MS Shell Dlg 2'; font-size:10pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Метод <span style=" font-weight:600;">move_to_end</span> двигает существующий ключ в любой конец OrderedDict. Объект будет смещен в правый угол, если последний аргумент OrderedDict указан как True (это по умолчанию), или в начало, если он указан как False.</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Любопытно, но </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">OrderedDicts</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> поддерживает обратную итерацию, используя встроенную функцию </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">reversed</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b144150793561"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">f</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">or key in reversed(new_d):</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b144150793561-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">   print (key, new_d[key])</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Результат </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td></td>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b14c685635368"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">p</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">ear 1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b14c685635368-2"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">o</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">range 2</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b14c685635368-3"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">b</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">anana 3</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5a61f2cf9b14c685635368-4"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">a</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">pple 4</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Весьма точно, однако, вероятно вам такой функционал не понадобится.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">Подведем итоги</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">Мы поработали с большим объемом материала в данной статье. Вы научились использовать </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">defaultdict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> и </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">OrderedDict</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;">. Мы также узнали много о наследуемом классе list – deque. Наконец, мы узнали, как использовать </span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt; font-weight:600;">namedtuple</span><span style=" font-family:'MS Shell Dlg 2'; font-size:10pt;"> в тех или иных случаях. Надеюсь, данная информация поможет вам в работе в будущем. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:10pt;"><br /></p></body></html>