<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:9pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="post-1115"></a><span style=" font-family:'DejaVu Sans'; font-size:11pt;">	</span><span style=" font-family:'DejaVu Sans'; font-size:11pt;">	</span></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:600;">Пакетное сжатие JPEG-изображений в нескольких директориях</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="1.png" width="189" height="140" /><span style=" font-family:'DejaVu Sans'; font-size:11pt;">Оптимизаторы в работе нередко сталкиваются с необходимостью быстро сжать большое количество изображений.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu Sans'; font-size:11pt;">Это необходимо:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">для увеличения скорости загрузки страницы;</li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">для улучшения оценки в тесте <a href="https://developers.google.com/speed/pagespeed/insights/"><span style=" text-decoration: underline; color:#0000ff;">PageSpeed Insights</span></a> от Google.</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu Sans'; font-size:11pt;">Массовое сжатие .jpg изображений, расположенных в нескольких директориях, реализовывал при помощи программы </span><a href="https://www.irfanview.com/"><span style=" font-family:'DejaVu Sans'; font-size:11pt; text-decoration: underline; color:#0000ff;">IrfanView</span></a><span style=" font-family:'DejaVu Sans'; font-size:11pt;">. Программа может как перезаписать старые изображения, так и создать папки в новом месте. Названия папок при этом сохранятся. IrfanView видит и обрабатывает также вложенные директории.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:600;">Методика</span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1. <a href="https://www.irfanview.com/"><span style=" text-decoration: underline; color:#0000ff;">Скачиваем</span></a> программу. Я скачивал с первого указанного хранилища файлов (оно внешнее).</li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">2. Устанавливаем. При установке программа предложила дополнительное программное обеспечение одного известного западного интернет-магазина. Не забудьте снять галочки.</li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">3. Если собираетесь сжимать уже опубликованные картинки, то с хостинга скачиваем директории с изображениями.</li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">4. В меню программы File выбираем Batch Conversion/Rename… (&quot;batch&quot; в переводе с английского означает &quot;группа&quot;, &quot;серия&quot;, &quot;пария&quot;).<br /><img src="2.png" width="364" height="522" /></li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">5. Добавляем все изображения из папок, для этого:</li>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">a. Выделяем все папки с картинками.</li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">b. Устанавливаем тип файлов JPG/JPEG (если в папках будут присутствовать изображения других форматов, они будут игнорироваться).</li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">c. Ставим галочку Include subdirectories (for ‘Add all’…), включить поддиректории, чтобы программа могла работать с несколькими папками, <span style=" font-weight:600;">а так же вложенными папками</span>.</li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">d. Нажимаем Add all.</li></ol>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">6. Нажав Browse выбираем директорию, где будут сохранятся папки со сжатыми изображениями.</li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">7. Нажав Options переходим к настройкам сжатия:</li>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">a. Бегунком указываем качество изображений на выходе. Чтобы лучше понять, до какого уровня можно сжимать картинки без заметной потери качества, я делаю несколько тестовых сжатий на небольшом количестве.<br /> <img src="3.png" width="296" height="442" /></li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">b. Снимаем все галочки кроме первой, Save as progressive JPG. Благодаря этой опции изображение может показываться до полной загрузки в некоторых браузерах. Плюс к этому прогрессивный формат не должен утяжелять картинку, а наоборот, в большинстве случаев <a href="https://habrahabr.com/post/165645/"><span style=" text-decoration: underline; color:#0000ff;">даже делать немного легче</span></a>. <br />Убирая остальные галочки, мы убираем дополнительную информацию об изображении: авторство, способ получения, информацию об устройстве, которым был сделан снимок, условия  при которых был сделан снимок и т.д. Если эту информацию оставить, изображение не пройдет тест PageSpeed Insights.</li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">c. Нажимаем ОК.</li></ol>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">8. Отмечаем Use advanced options (for bulk resize…) и нажимаем Advanced:<br /><img src="4.png" width="312" height="208" /><br />Здесь я ставлю только одну галку, необходимую для того, чтобы в конечной директории создавались поддиректории (иначе сжатые изображение будут размещены в одной папке):<br /><img src="5.png" width="260" height="232" /><br />Нажимаем OK.</li>
<li style=" font-family:'DejaVu Sans'; font-size:11pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">9. В основном окне нажимаем Start Batch.</li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu Sans'; font-size:11pt;">На этом всё. При сжатии программа сохранит имена изображений и названия папок.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu Sans'; font-size:11pt;">Таким образом мне удалось сжать одним махом около 19 тыс. изображений товаров. При выполнении большого количества операций Windows выдавала сообщение, что программа не отвечает. Однако, заходя в папку назначения, по нарастающему количеству сжатых изображений я убеждался, что процесс идёт. Обработка заканчивалась всегда успешно.			</span></p></body></html>