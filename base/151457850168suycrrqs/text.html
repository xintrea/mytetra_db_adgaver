<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:9pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Решил подсобрать коды перекодировки текстов родными средствами Windows + добавить пару новых фишек -)<br /><br />Итак,<br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />chcp 866<br />cmd /d /a /c type utf16.txt <span style=" color:#33cc33;">&gt;</span> 866_out.txt<br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />chcp 1251<br />cmd /d /a /c type utf16.txt <span style=" color:#33cc33;">&gt;</span> 1251_out.txt<br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />chcp 65001<br />cmd /d /u /c type utf8.txt <span style=" color:#33cc33;">&gt;</span> .tmp<br />chcp 1251<br />type .tmp <span style=" color:#33cc33;">&gt;</span> 1251_out.txt<br /><a href="http://www.ss64.com/nt/del.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">del</span></a> .tmp<br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Если батник сохранять в кодировке 866</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />chcp 866<br /><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> <span style=" color:#33cc33;">%%</span>? <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>&quot;&quot;<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> chcp 1251 <span style=" color:#33cc33;">&amp;</span> cmd /d /a /c <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> /p=яю<span style=" color:#33cc33;">&lt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">NUL</span></a> <span style=" color:#33cc33;">&gt;</span> .tmp<br />chcp 866<br />cmd /d /u /c type 866.txt <span style=" color:#33cc33;">&gt;&gt;</span> .tmp<br />chcp 1251<br />cmd /d /a /c type .tmp <span style=" color:#33cc33;">&gt;</span> 1251_out.txt<br /><a href="http://www.ss64.com/nt/del.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">del</span></a> .tmp<br /> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Если батник сохранять в кодировке 1251</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />chcp 1251<br />cmd /d /a /c <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> /p=яю<span style=" color:#33cc33;">&lt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">NUL</span></a> <span style=" color:#33cc33;">&gt;</span> .tmp<br />chcp 866<br />cmd /d /u /c type 866.txt <span style=" color:#33cc33;">&gt;&gt;</span> .tmp<br />chcp 1251<br />cmd /d /a /c type .tmp <span style=" color:#33cc33;">&gt;</span> 1251_out.txt<br /><a href="http://www.ss64.com/nt/del.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">del</span></a> .tmp<br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Если батник сохранять в кодировке 866</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />chcp 866<br /><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> <span style=" color:#33cc33;">%%</span>? <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>&quot;&quot;<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> chcp 1251 <span style=" color:#33cc33;">&amp;</span> cmd /d /a /c <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> /p=по<span style=" color:#33cc33;">&lt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">NUL</span></a> <span style=" color:#33cc33;">&gt;</span> .tmp<br />cmd /d /u /c type 1251.txt <span style=" color:#33cc33;">&gt;&gt;</span> .tmp<br />chcp 866<br />cmd /d /a /c type .tmp <span style=" color:#33cc33;">&gt;</span> 866_out.txt<br /><a href="http://www.ss64.com/nt/del.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">del</span></a> .tmp<br /> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Если батник сохранять в кодировке 1251</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />chcp 1251<br />cmd /d /a /c <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> /p=яю<span style=" color:#33cc33;">&lt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">NUL</span></a> <span style=" color:#33cc33;">&gt;</span> .tmp<br />cmd /d /u /c type 1251.txt <span style=" color:#33cc33;">&gt;&gt;</span> .tmp<br />chcp 866<br />cmd /d /a /c type .tmp <span style=" color:#33cc33;">&gt;</span> 866_out.txt<br /><a href="http://www.ss64.com/nt/del.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">del</span></a> .tmp<br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">С использованием JScript-вставки</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (Javascript): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" color:#339933;">@</span><span style=" font-weight:600; color:#000066;">set</span> <span style=" color:#339933;">@</span>x<span style=" color:#339933;">=</span><span style=" color:#cc0000;">0</span><span style=" color:#339933;">;</span> <span style=" font-style:italic; color:#006600;">/*<br />@echo off<br />call :Recode utf8.txt 1251_out.txt utf-8 windows-1251<br />pause<br />goto :eof<br /><br />:Recode in.[исходный файл] in.[результирующий файл] in.[кодировка исходного файла] in.[кодировка результирующего файла]<br />  cscript.exe //nologo //e:jscript &quot;%~f0&quot; &quot;%~1&quot; &quot;%~2&quot; &quot;%~3&quot; &quot;%~4&quot;<br />Exit /B<br /><br />*/</span>with <span style=" color:#009900;">(</span><span style=" font-weight:600; color:#000066;">new</span> ActiveXObject<span style=" color:#009900;">(</span><span style=" color:#3366cc;">'ADODB.Stream'</span><span style=" color:#009900;">))</span> <span style=" color:#009900;">{</span><br />  Charset <span style=" color:#339933;">=</span> WScript.<span style=" color:#660066;">Arguments</span><span style=" color:#009900;">(</span><span style=" color:#cc0000;">2</span><span style=" color:#009900;">)</span><span style=" color:#339933;">;</span><br />  Open<span style=" color:#009900;">()</span><span style=" color:#339933;">;</span><br />  LoadFromFile <span style=" color:#009900;">(</span>WScript.<span style=" color:#660066;">Arguments</span><span style=" color:#009900;">(</span><span style=" color:#cc0000;">0</span><span style=" color:#009900;">))</span><span style=" color:#339933;">;</span><br />  Text <span style=" color:#339933;">=</span> ReadText<span style=" color:#009900;">()</span><span style=" color:#339933;">;</span><br />  Close<span style=" color:#009900;">()</span><span style=" color:#339933;">;</span><br />  Charset <span style=" color:#339933;">=</span> WScript.<span style=" color:#660066;">Arguments</span><span style=" color:#009900;">(</span><span style=" color:#cc0000;">3</span><span style=" color:#009900;">)</span><span style=" color:#339933;">;</span><br />  Open<span style=" color:#009900;">()</span><span style=" color:#339933;">;</span><br />  WriteText <span style=" color:#009900;">(</span>Text<span style=" color:#009900;">)</span><span style=" color:#339933;">;</span><br />  SaveToFile <span style=" color:#009900;">(</span>WScript.<span style=" color:#660066;">Arguments</span><span style=" color:#009900;">(</span><span style=" color:#cc0000;">1</span><span style=" color:#009900;">)</span><span style=" color:#339933;">,</span> <span style=" color:#cc0000;">2</span><span style=" color:#009900;">)</span><span style=" color:#339933;">;</span><br />  Close<span style=" color:#009900;">()</span><span style=" color:#339933;">;</span><br /><span style=" color:#009900;">}</span><br /> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Названия доступных кодировок можно посмотреть в колонке .NET Name<br />в статье: <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd317756(v=vs.85).aspx"><span style=" text-decoration: underline; color:#0000ff;">https://msdn.microsoft.com/en-us/lib...(v=vs.85).aspx</span></a><br /><br /><span style=" font-weight:600;">С использованием внешних утилит:</span><br /><br /><span style=" font-weight:600; color:#0000ff;">win_iconv</span><span style=" font-weight:600;"><br /></span><br />Это программа с открытым исходным кодом.<br /><br /><a href="http://www.cyberforum.ru/attachments/292368d1374069197"><span style=" text-decoration: underline; color:#0000ff;">Скачать утилиту.</span></a><br /><br /><span style=" font-weight:600;">Синтаксис:</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />iconv [-c] [-s] [-f encoding] [-t encoding] [inputfile …]<br /> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Перечень кодировок:</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />iconv -l<br /> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Пример использования:</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />win_iconv -f UTF-16LE -t cp866 &quot;UTFtext.txt&quot; <span style=" color:#33cc33;">&gt;</span> &quot;DOStext.txt&quot;<br /> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Подробности в <a href="http://safezone.cc/threads/perevod-kodirovki-tekstovyx-fajlov-cherez-konsolnuju-utilitu-win_iconv.27843/"><span style=" text-decoration: underline; color:#0000ff;">этой теме</span></a>.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Демо-набор есть в архиве. Также прилагаю Excel-файл с всеми кодами символов, в том числе китайскими -)<br />Спасибо за внимание. Надеюсь, окажется Вам полезным. </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#0000ff;">Примеры универсальных (насколько это возможно для пакетного файла) перекодировщиков от ComSpec.</span><br /><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" color:#33cc33;">@</span>chcp 866<span style=" color:#33cc33;">&gt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">nul</span></a><br /><span style=" color:#33cc33;">@&lt;</span>&quot;<a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a>.file&quot;<span style=" color:#33cc33;">&gt;</span>&quot;out.file&quot; <span style=" color:#33cc33;">(</span><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> /f &quot;delims=&quot; <span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span> <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>'find/n /v &quot;&quot;'<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> <span style=" color:#33cc33;">@</span>chcp 1251<span style=" color:#33cc33;">&gt;</span>nul<span style=" color:#33cc33;">&amp;</span> <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> x=<span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span><span style=" color:#33cc33;">&amp;</span> cmd/v/c <a href="http://www.ss64.com/nt/echo.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">echo</span></a>[<span style=" color:#33cc33;">!</span><span style=" color:#448888;">x</span>:*]<span style=" color:#33cc33;">^^</span>=<span style=" color:#33cc33;">!)</span><br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" color:#33cc33;">@</span>chcp 866<span style=" color:#33cc33;">&gt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">nul</span></a><br /><span style=" color:#33cc33;">@&lt;</span>&quot;<a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a>.file&quot;<span style=" color:#33cc33;">&gt;</span>&quot;out.file&quot; <span style=" color:#33cc33;">(</span><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> /f &quot;delims=&quot; <span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span> <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>'find/n /v &quot;&quot;'<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> <span style=" color:#33cc33;">@</span>chcp 65001<span style=" color:#33cc33;">&gt;</span>nul<span style=" color:#33cc33;">&amp;</span> <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> x=<span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span><span style=" color:#33cc33;">&amp;</span> cmd/v/c <a href="http://www.ss64.com/nt/echo.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">echo</span></a>[<span style=" color:#33cc33;">!</span><span style=" color:#448888;">x</span>:*]<span style=" color:#33cc33;">^^</span>=<span style=" color:#33cc33;">!)</span><br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" color:#33cc33;">@</span>chcp 1251<span style=" color:#33cc33;">&gt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">nul</span></a><br /><span style=" color:#33cc33;">@&lt;</span>&quot;<a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a>.file&quot;<span style=" color:#33cc33;">&gt;</span>&quot;out.file&quot; <span style=" color:#33cc33;">(</span><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> /f &quot;delims=&quot; <span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span> <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>'find/n /v &quot;&quot;'<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> <span style=" color:#33cc33;">@</span>chcp 866<span style=" color:#33cc33;">&gt;</span>nul<span style=" color:#33cc33;">&amp;</span> <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> x=<span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span><span style=" color:#33cc33;">&amp;</span> cmd/v/c <a href="http://www.ss64.com/nt/echo.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">echo</span></a>[<span style=" color:#33cc33;">!</span><span style=" color:#448888;">x</span>:*]<span style=" color:#33cc33;">^^</span>=<span style=" color:#33cc33;">!)</span><br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" color:#33cc33;">@</span>chcp 1251<span style=" color:#33cc33;">&gt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">nul</span></a><br /><span style=" color:#33cc33;">@&lt;</span>&quot;<a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a>.file&quot;<span style=" color:#33cc33;">&gt;</span>&quot;out.file&quot; <span style=" color:#33cc33;">(</span><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> /f &quot;delims=&quot; <span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span> <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>'find/n /v &quot;&quot;'<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> <span style=" color:#33cc33;">@</span>chcp 65001<span style=" color:#33cc33;">&gt;</span>nul<span style=" color:#33cc33;">&amp;</span> <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> x=<span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span><span style=" color:#33cc33;">&amp;</span> cmd/v/c <a href="http://www.ss64.com/nt/echo.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">echo</span></a>[<span style=" color:#33cc33;">!</span><span style=" color:#448888;">x</span>:*]<span style=" color:#33cc33;">^^</span>=<span style=" color:#33cc33;">!)</span><br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" color:#33cc33;">@</span>chcp 65001<span style=" color:#33cc33;">&gt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">nul</span></a><br /><span style=" color:#33cc33;">@&lt;</span>&quot;<a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a>.file&quot;<span style=" color:#33cc33;">&gt;</span>&quot;out.file&quot; <span style=" color:#33cc33;">(</span><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> /f &quot;delims=&quot; <span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span> <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>'find/n /v &quot;&quot;'<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> <span style=" color:#33cc33;">@</span>chcp 866<span style=" color:#33cc33;">&gt;</span>nul<span style=" color:#33cc33;">&amp;</span> <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> x=<span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span><span style=" color:#33cc33;">&amp;</span> cmd/v/c <a href="http://www.ss64.com/nt/echo.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">echo</span></a>[<span style=" color:#33cc33;">!</span><span style=" color:#448888;">x</span>:*]<span style=" color:#33cc33;">^^</span>=<span style=" color:#33cc33;">!)</span><br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" color:#33cc33;">@</span>chcp 65001<span style=" color:#33cc33;">&gt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">nul</span></a><br /><span style=" color:#33cc33;">@&lt;</span>&quot;<a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a>.file&quot;<span style=" color:#33cc33;">&gt;</span>&quot;out.file&quot; <span style=" color:#33cc33;">(</span><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> /f &quot;delims=&quot; <span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span> <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>'find/n /v &quot;&quot;'<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> <span style=" color:#33cc33;">@</span>chcp 1251<span style=" color:#33cc33;">&gt;</span>nul<span style=" color:#33cc33;">&amp;</span> <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> x=<span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span><span style=" color:#33cc33;">&amp;</span> cmd/v/c <a href="http://www.ss64.com/nt/echo.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">echo</span></a>[<span style=" color:#33cc33;">!</span><span style=" color:#448888;">x</span>:*]<span style=" color:#33cc33;">^^</span>=<span style=" color:#33cc33;">!)</span><br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic; color:#b100b1;"><br />:: Не зависит от какой-нибудь из трёх (866, 1251, 65001) кодовых страниц, продекларированной на момент исполнения кода.</span><br /><span style=" color:#33cc33;">@&lt;</span>&quot;<a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a>.file&quot;<span style=" color:#33cc33;">&gt;</span>&quot;out.file&quot; <span style=" color:#33cc33;">(</span><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> /f &quot;delims=&quot; <span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span> <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>'find/n /v &quot;&quot;'<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> <span style=" color:#33cc33;">@</span>chcp 866<span style=" color:#33cc33;">&gt;</span>nul<span style=" color:#33cc33;">&amp;</span> <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> x=<span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span><span style=" color:#33cc33;">&amp;</span> cmd/v/c <a href="http://www.ss64.com/nt/echo.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">echo</span></a>[<span style=" color:#33cc33;">!</span><span style=" color:#448888;">x</span>:*]<span style=" color:#33cc33;">^^</span>=<span style=" color:#33cc33;">!)</span><br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic; color:#b100b1;"><br />:: Не зависит от какой-нибудь из трёх (866, 1251, 65001) кодовых страниц, продекларированной на момент исполнения кода.</span><br /><span style=" color:#33cc33;">@&lt;</span>&quot;<a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a>.file&quot;<span style=" color:#33cc33;">&gt;</span>&quot;out.file&quot; <span style=" color:#33cc33;">(</span><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> /f &quot;delims=&quot; <span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span> <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>'find/n /v &quot;&quot;'<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> <span style=" color:#33cc33;">@</span>chcp 1251<span style=" color:#33cc33;">&gt;</span>nul<span style=" color:#33cc33;">&amp;</span> <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> x=<span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span><span style=" color:#33cc33;">&amp;</span> cmd/v/c <a href="http://www.ss64.com/nt/echo.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">echo</span></a>[<span style=" color:#33cc33;">!</span><span style=" color:#448888;">x</span>:*]<span style=" color:#33cc33;">^^</span>=<span style=" color:#33cc33;">!)</span><br />  </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic; color:#b100b1;"><br />:: Не зависит от какой-нибудь из трёх (866, 1251, 65001) кодовых страниц, продекларированной на момент исполнения кода.</span><br /><span style=" color:#33cc33;">@&lt;</span>&quot;<a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a>.file&quot;<span style=" color:#33cc33;">&gt;</span>&quot;out.file&quot; <span style=" color:#33cc33;">(</span><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> /f &quot;delims=&quot; <span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span> <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>'find/n /v &quot;&quot;'<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> <span style=" color:#33cc33;">@</span>chcp 65001<span style=" color:#33cc33;">&gt;</span>nul<span style=" color:#33cc33;">&amp;</span> <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> x=<span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span><span style=" color:#33cc33;">&amp;</span> cmd/v/c <a href="http://www.ss64.com/nt/echo.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">echo</span></a>[<span style=" color:#33cc33;">!</span><span style=" color:#448888;">x</span>:*]<span style=" color:#33cc33;">^^</span>=<span style=" color:#33cc33;">!)</span><br /> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В отличие от ранее предлагавшихся перекодировщиков, основанных на построчном разборе текста в цикле командой &quot;<span style=" font-style:italic;">for</span>&quot;, данный код абсолютно устойчив к специальным символам, встречающимся в тексте, и полностью сохраняет форматирование текста, включая пустые строки. Код проверялся на всех символах английской и русской раскладки клавиатуры. Максимальная длина обрабатываемых строк может достигать 4091 символа.<br /><br /></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;">Код (DOS): </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" color:#33cc33;">@</span><a href="http://www.ss64.com/nt/echo.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">echo</span></a> off<br /><br /><span style=" color:#33cc33;">&gt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">nul</span></a> chcp 1251<br /><span style=" color:#33cc33;">&lt;</span>&quot;example.txt&quot; <span style=" color:#33cc33;">(</span><a href="http://www.ss64.com/nt/for.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">for</span></a> /f &quot;delims=&quot; <span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span> <a href="http://www.ss64.com/nt/in.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">in</span></a> <span style=" color:#33cc33;">(</span>'more'<span style=" color:#33cc33;">)</span> <a href="http://www.ss64.com/nt/do.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">do</span></a> <span style=" color:#33cc33;">&gt;</span><a href="http://www.ss64.com/nt/nul.html"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">nul</span></a> chcp 866<span style=" color:#33cc33;">&amp;</span> <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a>/a n+=1<span style=" color:#33cc33;">&amp;</span> <a href="http://www.ss64.com/nt/call.html"><span style=" font-weight:600; text-decoration: underline; color:#00b100;">call</span></a> <a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> x<span style=" color:#33cc33;">%%</span><span style=" color:#448888;">n</span><span style=" color:#33cc33;">%%</span><span style=" color:#448888;">=</span><span style=" color:#33cc33;">%%</span><span style=" color:#448888;">i</span><span style=" color:#33cc33;">)</span><br /><a href="http://www.ss64.com/nt/set.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">set</span></a> x<br /><br /><a href="http://www.ss64.com/nt/pause.html"><span style=" font-weight:600; text-decoration: underline; color:#b1b100;">pause</span></a><br /> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ни в коем случае нельзя chcp 1251 (т.е. весь вот этот код) помещать в блок скобок, если не включен режим отложенного раскрытия переменных. </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;">  </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>