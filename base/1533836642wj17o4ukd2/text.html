<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<html>
<h1 class="post__title post__title_full">
      <span class="post__title-text">Работа с PySide</span>
    </h1>


      <ul class="post__hubs post__hubs_full-post inline-list">
          <li class="inline-list__item inline-list__item_hub">
            <a href="https://habr.com/hub/python/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'Python'); }">Python</a>
          </li>
      </ul>

    


    <div class="post__body post__body_full">
      <div data-io-article-url="https://habr.com/post/134457/" class="post__text post__text-html js-mediator-article">Этот пост участвует в конкурсе <a href="http://habrahabr.ru/company/Nokia/blog/132522/">«Умные телефоны за умные посты»</a><br>
<img src="1.png" align="right"><br>
<br>
В Сети имеется некоторое количество информации по проекту <i>PySide</i>, но русскоязычной не так много.<br>
<br>
Данная статья является попыткой восполнить этот пробел. Далее будет 
описана сборка проекта, запуск приложений на эмуляторе, пример создания 
собственной привязки. Некоторые ключевые особенности <i>PySide</i> будут показаны на примерах.<br>
<a name="habracut"></a><br>
<h4>Введение. Что такое PySide?</h4><br>
<i>PySide</i> — это проект создания привязки <i>Qt</i> к языку программирования <i>Python</i>. Он направлен на реализацию поддержки всех возможностей <i>Qt</i>, в том числе <i>QtQuick</i> и <i>QtMobility</i>. На данный момент поддерживаются следующие версии компонент и платформы<br>
<table border="1">
<tbody><tr>
<td>Qt</td>
<td>4.6, 4.7, 4.8 betta</td>
</tr>
<tr>
<td>QtMobility</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Python</td>
<td>2.5, 2.6, 2.7, 3.2 (experemental)</td>
</tr>
<tr>
<td>OS</td>
<td>Linux/X11, Maemo 5, MeeGo, Windows, Mac OS X</td>
</tr>
</tbody></table><br>
Возможности использовать <i>PySide</i> на Symbian пока нет (или мне 
такая возможность не известна), но по заявлению разработчиков работа в 
этом направлении ведётся. В качестве альтернативы можете использовать 
PyS60, правда к <i>Qt</i> он никакого отношения не имеет, поэтому далее мы о нём говорить не будем.<br>
<br>
Проект <i>PySide</i> содержит также набор инструментов, которые 
позволяют создавать привязки любых библиотек написанных на С/С++. 
Подробнее об этих инструментах поговорим далее.<br>
<br>
<i>PySide</i> распространяется под лицензией LGPL, т.е. его можно 
использовать как в открытых, так и в закрытых, коммерческих проектах. 
Исходные коды <i>PySide</i> открыты и доступны по следующему адресу <a href="https://github.com/PySide">github.com/PySide</a>. Так же, если Вы обнаружили какие то проблемы, связанные с <i>PySide</i>, можете сообщить о них на официальный <a href="http://bugs.pyside.org">баг трекер проекта</a>.<br>
<br>
<h4>Сборка PySide, проверка работоспособности</h4><br>
На <a href="http://developer.qt.nokia.com/wiki/PySideDownloads">странице загрузки</a> доступна инструкция по установке <i>PySide</i>
 на различные ОС. Но может так оказаться, что для Вашего Linux 
дистрибутива, такой пакет недоступен. Соберем его самостоятельно, что 
совсем не сложно, т.к. даже здесь разработчики Qt позаботилась о своих 
пользователях, и подготовили набор скриптов, максимально 
автоматизирующих действия по сборке <i>PySide</i>.<br>
<br>
Итак, клонируем для начала Git репозиторий со скриптами сборки. Более 
нам ничего, пока, не нужно, т.к. по зависимостям будут клонированы все 
необходимые проекты.<br>
<br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">$ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git://github.com/PySide/BuildScripts.git buildscripts</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> buildscripts</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">$ git submodule init</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">$ git submodule update</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
У Вас в системе может быть установлено несколько версий <i>Qt</i>. Чтобы
 указать какую именно версию использовать, отредактируйте файл 
enviroment.sh, в котором пропишите путь до домашней директории <i>Qt</i> и путь, куда будет установлен <i>PySide</i>.
 Файл enviroment.sh снабжен подробными комментариями, поэтому трудностей
 у Вас не должно возникнуть. Сразу предупреждаю, что с версией <i>Qt</i>, установленной в системе по умолчанию, <i>PySide</i> может не собраться. Я рекомендую использовать для сборки последнюю версию QtSdk.<br>
<br>
После того как всё настроено, собираем <i>PySide</i> командой<br>
<br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">$ ./build_and_install</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
Для облегчения работы, файл enviroment.sh легко превращается в сценарий,
 при помощи которого запускаются приложения, использующие <i>PySide</i>. Всё что нужно — это сделать его исполняемым и добавить в конце <b>python $@</b>. <br>
<br>
Что бы проверить работоспособность полученного пакета, клонируем репозиторий с примерами <i>Qt</i> на <i>Python</i>, адаптированных для <i>PySide</i><br>
<br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">$ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git://github.com/PySide/Examples.git pyside-examples</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
и запускаем любой из понравившихся примеров, например Hyper UI<br>
<br>
<img src="2.png"><img src="3.png"><img src="4.png"><br>
<br>
Сейчас у нас готова сборка <i>PySide</i> под хостовую систему. Но при 
разработке может оказаться удобным запускать приложения в симуляторе, 
который входит в поставку QtSdk. Соберем <i>PySide</i> и для нее. Для этого отредактируйте переменную QT_SDK_HOME в файле enviroment.sh, указав в качестве домашней директории <i>Qt</i>
 путь до QtSimulator (${YOUPATH}/QtSDK/Simulator/Qt/gcc). Также 
необходимо отредактировать файл build_and_install: к команде запуска 
cmake нужно добавить опцию -DQ_WS_SIMULATOR=yes. Эта опция помогает 
cmake определить платформу под которую будет происходить компиляция.<br>
<br>
Если сейчас запустить сборку, то на данный момент она к сожалению 
закончится неудачей, т.к. не сможет собраться модуль QtWebKit. Я создал <a href="http://bugs.pyside.org/show_bug.cgi?id=1088">отчет</a>
 об этой ошибке к которому приложил небольшой патч, который эту проблему
 исправляет. Но момент написания статьи, этот баг еще не исправлен. 
Поэтому воспользуйтесь этим патчем для полноценной сборки <i>PySide</i> под QtSimulator (см. вложение к баг-репорту по ссылке выше).<br>
<br>
<img src="5.png"><img src="6.png"><br>
<br>
Ничего не мешает нам собрать привязку <a href="https://github.com/PySide/Mobility">QtMobility</a> для QtSimulator. Его сборка ничем не отличается от сборки самого <i>PySide</i>. <i>QtMobility</i>
 соберётся и даже будет запускать в симуляторе, но не один из модулей 
при этом, к сожалению, нельзя назвать рабочим. В полном объеме не 
заработал ни один пример поставляемый с самим <i>QtMobility</i>, ни из пакета <a href="https://github.com/PySide/Examples">pyside-examples</a>. С причинами этого еще буду разбираться и, возможно, когда-нибудь об этом напишу.<br>
<br>
<img src="7.png"><br>
<br>
<h4>Введение в программирование на PySide. Сигналы и слоты, система свойств</h4><br>
Данный раздел не является введением в язык программирование <i>Python</i>. Здесь лишь будет показано как использовать некоторые ключевые возможности Qt на <i>Python</i>.<br>
<br>
<h5>Сигнал-слот взаимодействие</h5><br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span>  PySide <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtCore</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">say_hello</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(name)</span></span></span><span class="hljs-function">:</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"Hello,"</span></span>, name</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(QtCore.QObject)</span></span></span><span class="hljs-class">:</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">    @QtCore.Slot(str)</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">say_bye</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, name)</span></span></span><span class="hljs-function">:</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">        <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"Bye,"</span></span>, name</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bar</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(QtCore.QObject)</span></span></span><span class="hljs-class">:</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    signal = QtCore.Signal(tuple)</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">f = Foo()</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">b = Bar()</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">b.signal.connect(say_hello)</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">b.signal.connect(f.say_bye)</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">b.signal.emit(<span class="hljs-string"><span class="hljs-string">"User."</span></span>)</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">b.signal.emit(<span class="hljs-number"><span class="hljs-number">1.25</span></span>)</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
Signal — это класс, через который происходит управление соединением 
сигнала и слота, а так же отправка самого сигнала. Типы передаваемых с 
сигналом параметров указываются при его создании. Это может быть любой 
тип С и <i>Python</i>. Если мы хотим отправлять параметры разного типа 
(как в примере выше), в качестве типа должен быть указан tuple или list.
 Как и раньше, сигнал должен быть объявлен в пределах класса 
унаследованного от QObject. <br>
<br>
Если нужно создать несколько сигналов, можно воспользоваться следующей формой записи<br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(QtCore.QObject)</span></span></span><span class="hljs-class">:</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    signals = QtCore.Signal((int,), (str,), (float, QtCore.QObject))</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
Этот код добавит три сигнала с сигнатурами signals(int), 
signals(QString) и signals(double,QObject*). Все они содержатся в 
переменной signals, который условно можно считать словарем (не 
итерабельным). В качестве ключа используются параметры сигнала. <br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">someone.signals.emit(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-comment"><span class="hljs-comment">#по умолчанию используется тип объявленный первым, т.е. int</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">someone.signals[str].emit(<span class="hljs-string"><span class="hljs-string">"Hello everybody!"</span></span>)  </p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">someone.signals[float, QtCore.QObject].emit(<span class="hljs-number"><span class="hljs-number">1.23</span></span>, obj)</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
В качестве слота может выступать любой метод класса, не обязательно 
унаследованного от QObject, глобальная функция или даже lambda-функция. 
Но подобные объекты не являются истинными слотами, в QMetaObject о них 
нет никакой информации, поэтому используйте такой подход с 
осторожностью. Например, если вы в качестве слота используете глобальную
 функцию, то вы не сможете получить в ней информацию о вызывающем 
объекте.<br>
<br>
Для того чтобы создать истинный слот, нужно воспользоваться декоратором 
Slot из модула QtCore. В коде это выглядит следующим образом:<br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">@QtCore.Slot(int)</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">@QtCore.Slot(str)</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mySlot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(value)</span></span></span><span class="hljs-function">:</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> value</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
Для слотов не действуют правила сигналов по перегрузке и мы не можем 
создать слот принимающий любой тип параметров. Для каждого типа 
параметра должен быть добавлен отдельный декоратор. Выше приведен пример
 слота, который может принимать параметры типа int и QString.<br>
<br>
И класс QtCore.Signal и декоратор QtCore.Slot в качестве дополнительных 
параметров могут принимать имя под которыми создаваемые сигналы и слоты 
будут храниться в метообъектной информации. По умолчанию, если имя не 
задано, сигналу назначится имя члена класса которому он присваивается, а
 слоту назначается имя декорируемого метода. Слоту также можно задать 
тип возвращаемого значения. Использовать подобный функционал можно для 
связи <i>Python</i> и <i>QML</i>.<br>
<br>
Подробнее о взаимодействии <i>Python</i> и <i>QML</i> можно почитать на <a href="http://developer.qt.nokia.com/wiki/Category:Developing_with_Qt::Qt_Quick"> developer.qt.nokia.com</a> в разделе Python. Так же можно посмотреть примеры <a href="https://gitorious.org/pyside-qml-examples">pyside-qml-examples</a>.<br>
<br>
<h5>Система свойств</h5><br>
Работа со свойствами <i>Qt</i> мало чем отличается от работы с классическими свойствами <i>Python</i>. Просто приведу небольшой пример<br>
<br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PySide <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtCore</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyObject</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(QtCore.QObject)</span></span></span><span class="hljs-class">:</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">        QtCore.QObject.__init__(self)</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">        self._x = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span></p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getx</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">        <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"get"</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self._x</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setx</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, val)</span></span></span><span class="hljs-function">:</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">        <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"set"</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">        self._x = val</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    prop = QtCore.Property(int, getx, setx)</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">obj = MyObject()</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">obj.prop = <span class="hljs-number"><span class="hljs-number">12345</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-keyword"><span class="hljs-keyword">print</span></span> obj.prop</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
Более подробно про работу со свойствами <i>Qt</i> в <i>Python</i> можно почитать <a href="http://www.pyside.org/docs/pseps/psep-0103.html">здесь</a>.<br>
<br>
<h4>Создание графического интерфейса с использованием PySide</h4><br>
В пакет <i>PySide</i> Tools входят стандартные средства Qt для работы с 
ресурсами приложений, разработки «классического» графического интерфейса
 и локализации приложений. Это pyside-ui, pyside-rcc и pyside-lupdate. 
Работа с ними ничем не отличается от тех же самых пакетов для Qt/C++. 
Поэтому вы все так же имеете возможность создавать каркас графического 
приложения в QtDesigner. Полученная форма компилируется при помощи 
pyside-ui, которому в качестве входных параметров нужно указать файл 
формы и выходной файл, через опцию -o. У pyside-ui есть также 
дополнительная интересная опция -x которая добавляет в получаемый файл 
на <i>Python</i> код запуска приложения. Ниже приведен небольшой пример 
запуска приложения использующего форму созданную в дизайнере, ресурсы и 
локализацию<br>
<br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PySide <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtCore, QtGui</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> form_ui <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-comment"><span class="hljs-comment">#подключаем графический интерфейс</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> resources_rc <span class="hljs-comment"><span class="hljs-comment">#подключаем ресурсы приложения</span></span></p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>:</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    translator = QtCore.QTranslator()</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    translator.load(<span class="hljs-string"><span class="hljs-string">':/i18n/translations/ru_RU'</span></span>) <span class="hljs-comment"><span class="hljs-comment">#подключаем файл локализации из ресурсов</span></span></p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    app = QtGui.QApplication(sys.argv)</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    app.installTranslator(translator)</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    Form = QtGui.QWidget()</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    ui = Ui_Form()</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    ui.setupUi(Form)</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    Form.show()</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    sys.exit(app.exec_())</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
Также в <i>PySide</i> доступны многие вкусности <i>Qt</i> последних лет, в том числе QtQuick. Т.е. мы не лишены возможности создавать гибридные приложения с использованием <i>Python</i> и <i>QML</i> (QtQuick.Particles, Qt Desktop Components и т.д.).<br>
<br>
<h4>Пример создания собственной привязки</h4><br>
Зная все выше описанное, мы можем создавать собственные приложения на <i>Python</i> использующие <i>Qt</i>,
 в том числе использующие QtQuick. Но как быть, если нам понадобится 
использовать библиотеку написанную на С/С++ с своем проекте или 
использовать свои предыдущие наработки сделанные на том же С/С++? Не 
переписывать же все заново на <i>Python</i>? <br>
<br>
К примеру, у нас есть некий проект использующий <a href="http://qt.gitorious.org/qt-components/desktop">Qt Components</a>. Весь основной функционал написан на <i>QML</i>. Но для его запуска нужен класс <a href="http://qt.gitorious.org/qt-components/desktop/trees/master/qmldesktopviewer">QmlDesktopViewer</a> уже написанный на С++. Нам не составит большого труда переписать его на <i>Python</i>, но это было бы сейчас не интересно. Давайте сделаем собственную привязку это класса к <i>Python</i>.<br>
<br>
Для этого воспользуемся инструментами из проекта <i>PySide</i> для создания привязок. Это API Extractor, Shiboken и Generator Runner. Все эти инструменты у нас уже есть.<br>
<br>
Что бы создать привязку, нужно для начала создать xml файл, в котором 
описывается, какие данные мы ходим экспортировать, скрыть, переименовать
 и т.д. В общем то, до чего мы будем получать доступ в полученном модуле
 <i>Python</i>. <br>
<br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- корневой элемент, содержащий всю информацию о получаемом модуле --&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- атрибут package задает "имя" модуля и путь куда будут складываться создаваемые обёртки (исходники) модуля  --&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- при такой записи в директории сборки будет создана поддиректория PySide/QmlDesktopViewer --&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- c файлами qmldesktopviewer_module_wrapper.cpp и pyside_qmldesktopviewer_python.h --&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">typesystem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">package</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"PySide.QmlDesktopViewer"</span></span></span><span class="hljs-tag">&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">load-typesystem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"typesystem_declarative.xml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">generate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"no"</span></span></span><span class="hljs-tag"> /&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-comment"><span class="hljs-comment">&lt;!-- исключаем из описанных классов метод  x11Event. --&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-comment"><span class="hljs-comment">&lt;!-- т.е. метод x11Event не будет доступен в модуле Python --&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rejection</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">function-name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"x11Event"</span></span></span><span class="hljs-tag"> /&gt;</span></span> </p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-comment"><span class="hljs-comment">&lt;!-- список полей, методов, классов и т.д. для которых будет создана привязка  --&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-comment"><span class="hljs-comment">&lt;!-- в нашем случае мы делаем обёртку для двух классов  --&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-comment"><span class="hljs-comment">&lt;!-- для каждого из них в PySide/QmlDesktopViewer будут созданы свои файлы привязки --&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-comment"><span class="hljs-comment">&lt;!-- logwidget_wraper.cpp logwidget_wraper.h) --&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object-type</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LoggerWidget"</span></span></span><span class="hljs-tag"> /&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-comment"><span class="hljs-comment">&lt;!-- qmldesktopviewer_wraper.cpp qmldesktopviewer_wraper.h) --&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object-type</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"QmlDesktopViewer"</span></span></span><span class="hljs-tag"> /&gt;</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">typesystem</span></span></span><span class="hljs-tag">&gt;</span></span></p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
Я специально подробно описал, какие файлы мы получим на выходе 
генератора, т.к. именно их предстоит скомпилировать, для получения 
модуля <i>Python</i>. Понимание этого облегчит написание файла проекта 
для используемой Вами системы сборки. Для более подробного ознакомления с
 правилами составления этого файла, смотрите документацию <a href="http://www.pyside.org/docs/apiextractor-0.10.8/">API Extractor</a>.<br>
<br>
Следующим шагом мы должны создать заголовочный файл языка С++ по 
которому будет извлекаться информация о данных, для которых делается 
привязка.<br>
<br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> QT_NO_STL</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> QT_NO_STL_WCHAR</span></span></p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> NULL</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> NULL    0</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span></p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-string"><span class="hljs-meta"><span class="hljs-string">"pyside_global.h"</span></span></span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;loggerwidget.h&gt;</span></span></span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;qmldesktopviewer.h&gt;</span></span></span></span></p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
Файл pyside_global.h мы получили во время сборки <i>PySide</i>. Можно скопировать его в проект или добавить путь до места его нахождения.<br>
<br>
В качестве системы сборки я использую CMake. Я не буду здесь описывать саму сборку. Полный код примера можно взять <a href="https://github.com/igor-bogomolov/pyside-desktop-component">здесь</a>. Можете воспользоваться им как примером для создания собственной привязки. <br>
<br>
Компилируем проект, и получаем библиотеку с оберткой над нашем классом, которую мы можем использовать в своем приложении на <i>Python</i>. Воспользуемся полученным модулем для запуска одного из примеров Qt Desktop Components.<br>
<br>
<p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PySide.QtCore <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> *</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PySide.QtGui <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> *</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PySide.QmlDesktopViewer <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> *</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>:</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(sys.argv) &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>:</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">        <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"Usage: qmldesktopviewer &lt;qml file&gt;"</span></span></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">        sys.exit()</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    app = QApplication(sys.argv)</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    viewer = QmlDesktopViewer()</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    viewer.open(sys.argv[<span class="hljs-number"><span class="hljs-number">1</span></span>])</p><p style=" font-family:'Courier New,Courier,sans-serif'; background-color:#eff0f1; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    sys.exit(app.exec_())</p><p style="-qt-paragraph-type:empty; margin-top:0px; background-color:#eff0f1; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; font-size:10px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><br>
<img src="8.png"><br>
<br>
Также хочу отметить, что для <i>PySide</i> уже существует несколько привязок сторонних библиотек. Одна из них — это привязка <a href="https://gitorious.org/pysideqwt">Qwt</a>.<br>
<br>
<h4>Используемые материалы</h4><br>
<a href="http://www.pyside.org/docs/pyside/contents.html">PySide v1.0.8 documentation</a><br>
<a href="http://www.pyside.org/docs/pyside-mobility">PySide Mobility v0.2.2 documentation</a><br>
<a href="http://www.pyside.org/docs/pyside-git/newsigslot.html">New-style signal/slot</a><br>
<a href="http://developer.qt.nokia.com/wiki/Category:LanguageBindings::PySide"><i>PySide на Developer Network</i><br>
</a><a href="http://lizardo.wordpress.com/2010/08/26/running-pyside-applications-on-qt-simulator">Running PySide applications on Qt Simulator</a><br>
<a href="http://developer.qt.nokia.com/wiki/PySide_Binding_Generator">PySide Binding Generator</a><br>
<a href="http://developer.qt.nokia.com/wiki/PySide_Binding_Generation_Tutorial">PySide Binding Generation Tutorial</a></div>
      

    </div>

    

    <dl class="post__tags">
      <dt class="post__tags-label">Метки:</dt>
      <dd class="post__tags-list">    <ul class="inline-list inline-list_fav-tags js-post-tags">
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5Bn9_contest%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">n9_contest</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5Bpython%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">python</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5Bpyside%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">pyside</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5Bnokia%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">nokia</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5Bqt%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">qt</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5Bqt%20mobility%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">qt mobility</a></li>
    </ul></dd></dl>
</body>
</html></p></body></html>